"use strict";(self.webpackChunkretail_pos=self.webpackChunkretail_pos||[]).push([[581],{9581:(at,O,d)=>{d.d(O,{CashierComponent:()=>ct});var M=d(467),i=d(375),P=d(9769),p=d(4341),u=d(3036),f=d(5964),h=d(8295),b=d(7314),y=d(119),v=d(3049),x=d(5312),t=d(5547),I=d(3081),E=d(6868),R=d(4796),k=d(497),w=d(1940),T=d(2197),S=d(39),j=d(8397);const A=["cashReceivedInput"],D=c=>({method:c});function F(c,l){1&c&&(t.j41(0,"div",34),t.nrm(1,"i",35),t.j41(2,"span"),t.EFF(3),t.nI1(4,"translate"),t.k0s(),t.j41(5,"a",36),t.EFF(6),t.nI1(7,"translate"),t.k0s()()),2&c&&(t.R7$(3),t.JRh(t.bMT(4,2,"CASHIER.REGISTER_WARNING")),t.R7$(3),t.SpI(" ",t.bMT(7,4,"CASHIER.OPEN_REGISTER")," "))}function N(c,l){if(1&c&&(t.j41(0,"span",57),t.EFF(1),t.k0s()),2&c){const e=t.XpG().$implicit;t.R7$(),t.SpI("",e.quantity,"x")}}function $(c,l){if(1&c&&(t.j41(0,"span",58),t.EFF(1),t.nI1(2,"appCurrency"),t.k0s()),2&c){const e=t.XpG().$implicit;t.R7$(),t.SpI("",t.bMT(2,1,e.unitPrice)," =")}}function G(c,l){if(1&c&&(t.j41(0,"span",62),t.nrm(1,"i",63),t.EFF(2),t.k0s()),2&c){const e=t.XpG(2).$implicit;t.R7$(2),t.SpI(" ",e.description," ")}}function L(c,l){if(1&c&&(t.j41(0,"span",64),t.nrm(1,"i",65),t.EFF(2),t.nI1(3,"appCurrency"),t.k0s()),2&c){const e=t.XpG(2).$implicit;t.R7$(2),t.Lme(" ",e.weight.toFixed(3),"kg @ ",t.bMT(3,2,e.pricePerKg),"/kg ")}}function B(c,l){if(1&c&&(t.j41(0,"div",59),t.DNE(1,G,3,1,"span",60)(2,L,4,4,"span",61),t.k0s()),2&c){const e=t.XpG().$implicit;t.R7$(),t.Y8G("ngIf",e.description),t.R7$(),t.Y8G("ngIf",e.weight&&e.pricePerKg)}}function z(c,l){if(1&c){const e=t.RV6();t.j41(0,"div",39)(1,"div",40)(2,"button",41),t.bIt("click",function(n){const a=i.eBV(e).$implicit;return t.XpG(2).decreaseQuantity(a.id),i.Njj(n.stopPropagation())}),t.nrm(3,"i",42),t.k0s(),t.j41(4,"span",43),t.EFF(5),t.k0s(),t.j41(6,"button",44),t.bIt("click",function(n){const a=i.eBV(e).$implicit;return t.XpG(2).increaseQuantity(a.id),i.Njj(n.stopPropagation())}),t.nrm(7,"i",45),t.k0s()(),t.j41(8,"div",46),t.bIt("click",function(){const n=i.eBV(e).$implicit,a=t.XpG(2);return i.Njj(a.editItem(n.id))}),t.j41(9,"div",47)(10,"span",48),t.EFF(11),t.k0s(),t.j41(12,"div",49),t.DNE(13,N,2,1,"span",50)(14,$,3,3,"span",51),t.j41(15,"span",52),t.EFF(16),t.nI1(17,"appCurrency"),t.k0s()()(),t.DNE(18,B,3,2,"div",53),t.k0s(),t.j41(19,"div",54)(20,"button",55),t.bIt("click",function(n){const a=i.eBV(e).$implicit;return t.XpG(2).removeItem(a.id),i.Njj(n.stopPropagation())}),t.nrm(21,"i",56),t.k0s()()()}if(2&c){const e=l.$implicit;t.R7$(5),t.JRh(e.quantity),t.R7$(6),t.SpI("#",e.id+1),t.R7$(2),t.Y8G("ngIf",e.quantity>1),t.R7$(),t.Y8G("ngIf",e.quantity>1),t.R7$(2),t.JRh(t.bMT(17,6,e.price)),t.R7$(2),t.Y8G("ngIf",e.description||e.weight)}}function Y(c,l){if(1&c&&(t.j41(0,"div",37),t.DNE(1,z,22,8,"div",38),t.k0s()),2&c){const e=t.XpG();t.R7$(),t.Y8G("ngForOf",e.items())}}function K(c,l){1&c&&(t.j41(0,"div",66),t.nrm(1,"i",67),t.j41(2,"p"),t.EFF(3),t.nI1(4,"translate"),t.k0s(),t.j41(5,"p",68),t.EFF(6),t.nI1(7,"translate"),t.k0s()()),2&c&&(t.R7$(3),t.JRh(t.bMT(4,2,"CASHIER.ITEMS.EMPTY")),t.R7$(3),t.JRh(t.bMT(7,4,"CASHIER.ITEMS.HINT")))}function W(c,l){if(1&c&&(t.j41(0,"div",90)(1,"span",91),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.j41(4,"span",92),t.EFF(5),t.nI1(6,"appCurrency"),t.k0s()()),2&c){const e=t.XpG(3);t.R7$(2),t.JRh(t.bMT(3,2,"CASHIER.PAYMENT.CHANGE")),t.R7$(3),t.JRh(t.bMT(6,4,e.change()))}}function U(c,l){1&c&&(t.j41(0,"div",93),t.nrm(1,"i",35),t.EFF(2),t.nI1(3,"translate"),t.k0s()),2&c&&(t.R7$(2),t.SpI(" ",t.bMT(3,1,"CASHIER.PAYMENT.AMOUNT_TOO_LOW")," "))}function V(c,l){if(1&c){const e=t.RV6();t.j41(0,"div",84)(1,"div",85)(2,"label",86),t.EFF(3),t.nI1(4,"translate"),t.k0s(),t.j41(5,"input",87,1),t.nI1(7,"translate"),t.mxI("ngModelChange",function(n){i.eBV(e);const a=t.XpG(2);return t.DH7(a.cashReceived,n)||(a.cashReceived=n),i.Njj(n)}),t.bIt("ngModelChange",function(){i.eBV(e);const n=t.XpG(2);return i.Njj(n.onCashReceivedChange())}),t.k0s()(),t.DNE(8,W,7,6,"div",88)(9,U,4,3,"div",89),t.k0s()}if(2&c){const e=t.XpG(2);t.R7$(3),t.JRh(t.bMT(4,8,"CASHIER.PAYMENT.CASH_RECEIVED")),t.R7$(2),t.AVh("invalid",e.cashReceived()&&e.parseFloat(e.cashReceived())<e.total()),t.Y8G("placeholder",t.mNQ(t.bMT(7,10,"CASHIER.PAYMENT.CASH_RECEIVED"))),t.R50("ngModel",e.cashReceived),t.R7$(3),t.Y8G("ngIf",e.change()>0),t.R7$(),t.Y8G("ngIf",e.cashReceived()&&e.parseFloat(e.cashReceived())<e.total())}}function H(c,l){if(1&c&&(t.j41(0,"div",94),t.nrm(1,"i",95),t.j41(2,"p"),t.EFF(3),t.nI1(4,"translate"),t.k0s()()),2&c){const e=t.XpG(2);t.R7$(3),t.SpI(" ",t.i5U(4,1,"CASHIER.PAYMENT.CONFIRM_MESSAGE",t.eq3(4,D,e.selectedPaymentMethod()))," ")}}function X(c,l){1&c&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&c&&(t.R7$(),t.JRh(t.bMT(2,1,"CASHIER.PAYMENT.CONFIRM_PAYMENT")))}function q(c,l){1&c&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&c&&(t.R7$(),t.JRh(t.bMT(2,1,"CASHIER.PAYMENT.PROCESSING")))}function J(c,l){if(1&c){const e=t.RV6();t.j41(0,"div",69),t.bIt("click",function(){i.eBV(e);const n=t.XpG();return i.Njj(n.cancelPayment())}),t.j41(1,"div",70),t.bIt("click",function(n){return i.eBV(e),i.Njj(n.stopPropagation())}),t.j41(2,"div",71)(3,"h2"),t.nrm(4,"i",72),t.EFF(5),t.nI1(6,"translate"),t.nI1(7,"translate"),t.nI1(8,"translate"),t.k0s(),t.j41(9,"button",73),t.bIt("click",function(){i.eBV(e);const n=t.XpG();return i.Njj(n.cancelPayment())}),t.nrm(10,"i",56),t.k0s()(),t.j41(11,"div",74)(12,"div",75)(13,"span",76),t.EFF(14),t.nI1(15,"translate"),t.k0s(),t.j41(16,"span",77),t.EFF(17),t.nI1(18,"appCurrency"),t.k0s()(),t.DNE(19,V,10,12,"div",78)(20,H,5,6,"div",79),t.k0s(),t.j41(21,"div",80)(22,"button",81),t.bIt("click",function(){i.eBV(e);const n=t.XpG();return i.Njj(n.cancelPayment())}),t.EFF(23),t.nI1(24,"translate"),t.k0s(),t.j41(25,"button",82),t.bIt("click",function(){i.eBV(e);const n=t.XpG();return i.Njj(n.confirmPayment())}),t.DNE(26,X,3,3,"span",83)(27,q,3,3,"span",83),t.k0s()()()()}if(2&c){const e=t.XpG();t.R7$(4),t.AVh("fa-money-bill-wave","cash"===e.selectedPaymentMethod())("fa-credit-card","card"===e.selectedPaymentMethod())("fa-exchange-alt","transfer"===e.selectedPaymentMethod()),t.R7$(),t.SpI(" ","cash"===e.selectedPaymentMethod()?t.bMT(6,16,"CASHIER.PAYMENT.TITLE.CASH"):"card"===e.selectedPaymentMethod()?t.bMT(7,18,"CASHIER.PAYMENT.TITLE.CARD"):t.bMT(8,20,"CASHIER.PAYMENT.TITLE.TRANSFER")," "),t.R7$(9),t.JRh(t.bMT(15,22,"CASHIER.PAYMENT.TOTAL_AMOUNT")),t.R7$(3),t.JRh(t.bMT(18,24,e.total())),t.R7$(2),t.Y8G("ngIf","cash"===e.selectedPaymentMethod()),t.R7$(),t.Y8G("ngIf","cash"!==e.selectedPaymentMethod()),t.R7$(2),t.Y8G("disabled",e.isProcessing()),t.R7$(),t.SpI(" ",t.bMT(24,26,"GLOBAL.CANCEL")," "),t.R7$(2),t.Y8G("disabled",e.isProcessing()),t.R7$(),t.Y8G("ngIf",!e.isProcessing()),t.R7$(),t.Y8G("ngIf",e.isProcessing())}}function Q(c,l){if(1&c){const e=t.RV6();t.j41(0,"button",114),t.bIt("click",function(){i.eBV(e);const n=t.XpG(2);return i.Njj(n.connectToScale())}),t.nrm(1,"i",115),t.EFF(2),t.nI1(3,"translate"),t.k0s()}2&c&&(t.R7$(2),t.SpI(" ",t.bMT(3,1,"CASHIER.SCALE.CONNECT")," "))}function Z(c,l){if(1&c){const e=t.RV6();t.j41(0,"button",116),t.bIt("click",function(){i.eBV(e);const n=t.XpG(2);return i.Njj(n.disconnectScale())}),t.nrm(1,"i",117),t.EFF(2),t.nI1(3,"translate"),t.k0s()}2&c&&(t.R7$(2),t.SpI(" ",t.bMT(3,1,"CASHIER.SCALE.DISCONNECT")," "))}function tt(c,l){1&c&&(t.j41(0,"span",126),t.nrm(1,"i",113),t.EFF(2," Stable "),t.k0s())}function et(c,l){if(1&c){const e=t.RV6();t.j41(0,"div",118)(1,"div",119),t.nrm(2,"i",120),t.j41(3,"span",121),t.EFF(4),t.k0s(),t.j41(5,"span",122),t.EFF(6),t.k0s(),t.DNE(7,tt,3,0,"span",123),t.k0s(),t.j41(8,"label",124)(9,"input",125),t.bIt("change",function(){i.eBV(e);const n=t.XpG(2);return i.Njj(n.toggleUseScaleWeight())}),t.k0s(),t.j41(10,"span"),t.EFF(11),t.nI1(12,"translate"),t.k0s()()()}if(2&c){const e=t.XpG(2);t.R7$(),t.AVh("stable",e.currentScaleReading().stable),t.R7$(3),t.JRh(e.currentScaleReading().weight.toFixed(3)),t.R7$(2),t.JRh(e.currentScaleReading().unit),t.R7$(),t.Y8G("ngIf",e.currentScaleReading().stable),t.R7$(2),t.Y8G("checked",e.useScaleWeight()),t.R7$(2),t.JRh(t.bMT(12,7,"CASHIER.SCALE.USE_SCALE_LABEL"))}}function nt(c,l){1&c&&(t.j41(0,"small",127),t.nrm(1,"i",128),t.EFF(2),t.nI1(3,"translate"),t.k0s()),2&c&&(t.R7$(2),t.SpI(" ",t.bMT(3,1,"CASHIER.SCALE.WEIGHT_AUTOMATIC")," "))}function ot(c,l){if(1&c&&(t.j41(0,"div",129)(1,"span",130),t.EFF(2,"Total Price:"),t.k0s(),t.j41(3,"span",131),t.EFF(4),t.nI1(5,"appCurrency"),t.k0s()()),2&c){const e=t.XpG(2);t.R7$(4),t.SpI(" ",t.bMT(5,1,e.parseFloat(e.looseProductWeight())*e.parseFloat(e.looseProductPricePerKg()))," ")}}function it(c,l){if(1&c){const e=t.RV6();t.j41(0,"div",69),t.bIt("click",function(){i.eBV(e);const n=t.XpG();return i.Njj(n.cancelLooseProduct())}),t.j41(1,"div",96),t.bIt("click",function(n){return i.eBV(e),i.Njj(n.stopPropagation())}),t.j41(2,"div",71)(3,"h2"),t.nrm(4,"i",65),t.EFF(5),t.nI1(6,"translate"),t.k0s(),t.j41(7,"button",73),t.bIt("click",function(){i.eBV(e);const n=t.XpG();return i.Njj(n.cancelLooseProduct())}),t.nrm(8,"i",56),t.k0s()(),t.j41(9,"div",74)(10,"div",97)(11,"div",98),t.nrm(12,"i",99),t.j41(13,"span"),t.EFF(14),t.nI1(15,"translate"),t.nI1(16,"translate"),t.nI1(17,"translate"),t.k0s()(),t.DNE(18,Q,4,3,"button",100)(19,Z,4,3,"button",101),t.k0s(),t.DNE(20,et,13,9,"div",102),t.j41(21,"div",85)(22,"label",103),t.EFF(23),t.nI1(24,"translate"),t.k0s(),t.j41(25,"input",104),t.nI1(26,"translate"),t.mxI("ngModelChange",function(n){i.eBV(e);const a=t.XpG();return t.DH7(a.looseProductDescription,n)||(a.looseProductDescription=n),i.Njj(n)}),t.k0s()(),t.j41(27,"div",85)(28,"label",105),t.EFF(29,"Weight (kg):"),t.k0s(),t.j41(30,"input",106),t.mxI("ngModelChange",function(n){i.eBV(e);const a=t.XpG();return t.DH7(a.looseProductWeight,n)||(a.looseProductWeight=n),i.Njj(n)}),t.k0s(),t.DNE(31,nt,4,3,"small",107),t.k0s(),t.j41(32,"div",85)(33,"label",108),t.EFF(34,"Price per kg ($):"),t.k0s(),t.j41(35,"input",109),t.mxI("ngModelChange",function(n){i.eBV(e);const a=t.XpG();return t.DH7(a.looseProductPricePerKg,n)||(a.looseProductPricePerKg=n),i.Njj(n)}),t.k0s()(),t.DNE(36,ot,6,3,"div",110),t.k0s(),t.j41(37,"div",80)(38,"button",111),t.bIt("click",function(){i.eBV(e);const n=t.XpG();return i.Njj(n.cancelLooseProduct())}),t.EFF(39," Cancel "),t.k0s(),t.j41(40,"button",112),t.bIt("click",function(){i.eBV(e);const n=t.XpG();return i.Njj(n.confirmLooseProduct())}),t.nrm(41,"i",113),t.EFF(42," Add Item "),t.k0s()()()()}if(2&c){const e=t.XpG();t.R7$(5),t.SpI(" ",t.bMT(6,21,"CASHIER.LOOSE_PRODUCT")," "),t.R7$(7),t.AVh("connected",e.scaleConnected()),t.R7$(2),t.Lme(" ",t.bMT(15,23,"CASHIER.SCALE.LABEL"),": ",e.scaleConnected()?t.bMT(16,25,"CASHIER.SCALE.CONNECTED"):t.bMT(17,27,"CASHIER.SCALE.NOT_CONNECTED")," "),t.R7$(4),t.Y8G("ngIf",!e.scaleConnected()),t.R7$(),t.Y8G("ngIf",e.scaleConnected()),t.R7$(),t.Y8G("ngIf",e.currentScaleReading()&&e.scaleConnected()),t.R7$(3),t.JRh(t.bMT(24,29,"CASHIER.LOOSE_PRODUCT_MODAL.DESCRIPTION_PLACEHOLDER")),t.R7$(2),t.Y8G("placeholder",t.mNQ(t.bMT(26,31,"CASHIER.LOOSE_PRODUCT_MODAL.DESCRIPTION_PLACEHOLDER"))),t.R50("ngModel",e.looseProductDescription),t.R7$(5),t.AVh("invalid",e.looseProductWeight()&&e.parseFloat(e.looseProductWeight())<=0),t.R50("ngModel",e.looseProductWeight),t.Y8G("readonly",e.useScaleWeight()&&e.scaleConnected()),t.R7$(),t.Y8G("ngIf",e.useScaleWeight()&&e.scaleConnected()),t.R7$(4),t.AVh("invalid",e.looseProductPricePerKg()&&e.parseFloat(e.looseProductPricePerKg())<=0),t.R50("ngModel",e.looseProductPricePerKg),t.R7$(),t.Y8G("ngIf",e.looseProductWeight()&&e.looseProductPricePerKg()&&e.parseFloat(e.looseProductWeight())>0&&e.parseFloat(e.looseProductPricePerKg())>0)}}let ct=(()=>{class c{getLastItemPrice(){const e=this.items();return e.length>0?e[e.length-1].unitPrice:null}blurButton(e){e.target?.blur()}constructor(e,o,n,a,s,r,_,m,C){this.saleService=e,this.cartService=o,this.authService=n,this.currencyService=a,this.scaleService=s,this.receiptGeneratorService=r,this.registerService=_,this.toastService=m,this.router=C,this.items=(0,i.vPA)([]),this.total=(0,i.vPA)(0),this.isProcessing=(0,i.vPA)(!1),this.activeCartId=(0,i.vPA)(null),this.showPaymentModal=(0,i.vPA)(!1),this.selectedPaymentMethod=(0,i.vPA)(null),this.cashReceived=(0,i.vPA)(""),this.change=(0,i.vPA)(0),this.showLooseProductModal=(0,i.vPA)(!1),this.looseProductWeight=(0,i.vPA)(""),this.looseProductPricePerKg=(0,i.vPA)(""),this.looseProductDescription=(0,i.vPA)(""),this.scaleConnected=(0,i.vPA)(!1),this.currentScaleReading=(0,i.vPA)(null),this.useScaleWeight=(0,i.vPA)(!1),this.activeTab=(0,i.vPA)("calculator"),this.currentRegister=(0,i.vPA)(null),this.itemIdCounter=0,this.deleteKeyPressCount=0,this.deleteKeyTimer=null,this.saveCartTimer=null,this.debounceDelay=1e3,this.parseFloat=parseFloat,(0,i.QZP)(()=>{this.scaleService.currentWeight$.subscribe(g=>{this.currentScaleReading.set(g),this.useScaleWeight()&&g&&g.stable&&this.looseProductWeight.set(g.weight.toFixed(3))})}),this.scaleConnected.set(this.scaleService.isConnected()),this.loadActiveCart(),this.setupSessionCleanup()}ngOnInit(){this.registerService.currentRegister$.subscribe(e=>{this.currentRegister.set(e)}),this.registerService.getActiveRegister().subscribe(),this.router.events.pipe((0,f.p)(e=>e instanceof u.wF)).subscribe(e=>{e.url.includes("/cashier")&&setTimeout(()=>this.calculator?.focusCalculator(),100)})}ngAfterViewInit(){setTimeout(()=>this.calculator?.focusCalculator(),100)}setupSessionCleanup(){window.addEventListener("beforeunload",()=>{this.activeCartId()&&this.items().length>0&&!this.showPaymentModal()&&this.markCartAsAbandoned()}),window.addEventListener("unload",()=>{this.activeCartId()&&this.items().length>0&&!this.showPaymentModal()&&this.markCartAsAbandoned()})}markCartAsAbandoned(){if(!this.activeCartId())return;const e=this.activeCartId(),o=`${x.c.apiUrl}/carts/${e}/abandon`,n=new FormData;n.append("status","abandoned"),navigator.sendBeacon(o,n)}loadActiveCart(){const e=this.authService.getCurrentUser();!e||!e.id||this.cartService.getActiveCart(e.id).subscribe({next:o=>{if(o&&o.items){const n=o.items.map((a,s)=>({price:a.subtotal,unitPrice:a.price,quantity:a.quantity,id:s,description:a.product?.name}));this.items.set(n),this.total.set(o.total),this.activeCartId.set(o._id),this.itemIdCounter=n.length}},error:o=>{console.log("No active cart found")}})}saveCart(){const e=this.authService.getCurrentUser();if(!e||!e.id)return;const o={cashier:e.id,items:this.items().map(n=>({product:null,quantity:n.quantity,price:n.unitPrice,subtotal:n.price,description:n.description,weight:n.weight,pricePerKg:n.pricePerKg})),subtotal:this.total(),tax:0,discount:0,total:this.total(),status:"active"};this.activeCartId()?this.cartService.updateCart(this.activeCartId(),o).subscribe({next:n=>{this.activeCartId.set(n._id)},error:n=>{console.error("Error updating cart:",n)}}):this.cartService.createCart(o).subscribe({next:n=>{this.activeCartId.set(n._id)},error:n=>{console.error("Error creating cart:",n)}})}debouncedSaveCart(){this.saveCartTimer&&clearTimeout(this.saveCartTimer),this.saveCartTimer=setTimeout(()=>{this.saveCart()},this.debounceDelay)}handleKeyboardEvent(e){const o=e.target;if(this.showPaymentModal()||this.showLooseProductModal()||"INPUT"===o.tagName||"TEXTAREA"===o.tagName||"BUTTON"===o.tagName)return;const n=e.key;if(/^[0-9]$/.test(n))return e.preventDefault(),void this.calculator?.appendNumber(n);if(/^Numpad[0-9]$/.test(e.code)){e.preventDefault();const a=e.code.replace("Numpad","");return void this.calculator?.appendNumber(a)}if(e.keyCode>=48&&e.keyCode<=57||e.keyCode>=96&&e.keyCode<=105){e.preventDefault();const a=e.keyCode>=96?(e.keyCode-96).toString():(e.keyCode-48).toString();return void this.calculator?.appendNumber(a)}return"."===n||","===n||"NumpadDecimal"===e.code||110===e.keyCode||190===e.keyCode?(e.preventDefault(),void this.calculator?.appendDecimal()):"Enter"===n?(e.preventDefault(),void this.calculator?.handleEnter()):"Backspace"===n?(e.preventDefault(),void this.calculator?.backspace()):"Delete"===n?(e.preventDefault(),void this.handleDeleteKey()):"Escape"===n?(e.preventDefault(),void this.calculator?.clear()):"x"===n||"X"===n||"*"===n?(e.preventDefault(),void this.calculator?.handleMultiply()):"g"===n||"G"===n?(e.preventDefault(),void this.openLooseProductModal()):void 0}handleDeleteKey(){const e=this.items();if(0!==e.length)if(this.deleteKeyPressCount++,this.deleteKeyTimer&&clearTimeout(this.deleteKeyTimer),1===this.deleteKeyPressCount){const o=e[e.length-1];this.calculator?.setDisplay(o.price.toFixed(2)),this.removeItem(o.id),this.deleteKeyTimer=setTimeout(()=>{this.deleteKeyPressCount=0},1e3)}else if(2===this.deleteKeyPressCount){const o=e[e.length-1];o&&this.removeItem(o.id),this.calculator?.setDisplay("0"),this.deleteKeyPressCount=0,clearTimeout(this.deleteKeyTimer)}}onCalculatorAdd(e){const o={price:e.value,unitPrice:e.value,quantity:1,id:this.itemIdCounter++};this.items.update(n=>[...n,o]),this.total.update(n=>n+e.value),this.debouncedSaveCart()}onCalculatorMultiplyConfirm(e){if("add"===e.mode){const o=e.pendingValue??0,n={price:o*e.quantity,unitPrice:o,quantity:e.quantity,id:this.itemIdCounter++};this.items.update(a=>[...a,n]),this.total.update(a=>a+n.price)}else if("update"===e.mode){const o=this.items();if(0===o.length)return;const n=o[o.length-1],a=e.quantity,s=n.unitPrice*a;this.items.update(_=>_.map((m,C)=>C===_.length-1?{...m,quantity:a,price:s}:m));const r=s-n.price;this.total.update(_=>_+r)}this.debouncedSaveCart()}clearAll(){this.calculator?.setDisplay("0"),this.items.set([]),this.total.set(0)}clearAllItems(){0!==this.items().length&&confirm("Are you sure you want to clear all items?")&&(this.items.set([]),this.total.set(0),this.calculator?.setDisplay("0"),this.activeCartId()&&this.cartService.deleteCart(this.activeCartId()).subscribe({next:()=>{this.activeCartId.set(null)},error:e=>{console.error("Error deleting cart:",e)}}))}increaseQuantity(e){const o=this.items().find(s=>s.id===e);if(!o)return;const n=o.quantity+1,a=o.unitPrice*n;this.items.update(s=>s.map(r=>r.id===e?{...r,quantity:n,price:a}:r)),this.total.update(s=>s+o.unitPrice),this.debouncedSaveCart()}decreaseQuantity(e){const o=this.items().find(s=>s.id===e);if(!o)return;if(o.quantity<=1)return void this.removeItem(e);const n=o.quantity-1,a=o.unitPrice*n;this.items.update(s=>s.map(r=>r.id===e?{...r,quantity:n,price:a}:r)),this.total.update(s=>s-o.unitPrice),this.debouncedSaveCart()}openLooseProductModal(){this.showLooseProductModal.set(!0),this.looseProductWeight.set(""),this.looseProductPricePerKg.set(""),this.looseProductDescription.set(""),this.useScaleWeight.set(!1)}cancelLooseProduct(){this.showLooseProductModal.set(!1),this.looseProductWeight.set(""),this.looseProductPricePerKg.set(""),this.looseProductDescription.set(""),this.useScaleWeight.set(!1)}connectToScale(){var e=this;return(0,M.A)(function*(){const o=yield e.scaleService.connectScale();e.scaleConnected.set(o),o?(e.useScaleWeight.set(!0),e.toastService.show("Scale connected successfully!","success")):e.toastService.show("Failed to connect to scale. Make sure the scale is connected via USB.","error")})()}disconnectScale(){var e=this;return(0,M.A)(function*(){yield e.scaleService.disconnectScale(),e.scaleConnected.set(!1),e.useScaleWeight.set(!1),e.currentScaleReading.set(null)})()}toggleUseScaleWeight(){if(this.scaleConnected()){if(this.useScaleWeight.update(e=>!e),this.useScaleWeight()){const e=this.currentScaleReading();e&&e.stable&&this.looseProductWeight.set(e.weight.toFixed(3))}}else this.toastService.show("Please connect to a scale first.","info")}confirmLooseProduct(){const e=parseFloat(this.looseProductWeight()),o=parseFloat(this.looseProductPricePerKg()),n=this.looseProductDescription().trim()||"Loose Product";if(isNaN(e)||e<=0)return void this.toastService.show("Please enter a valid weight.","info");if(isNaN(o)||o<=0)return void this.toastService.show("Please enter a valid price per kg.","info");const a=e*o,s={price:a,unitPrice:a,quantity:1,id:this.itemIdCounter++,description:n,weight:e,pricePerKg:o};this.items.update(r=>[...r,s]),this.total.update(r=>r+a),this.cancelLooseProduct(),this.debouncedSaveCart()}removeItem(e){const o=this.items().find(n=>n.id===e);o&&(this.items.update(n=>n.filter(a=>a.id!==e)),this.total.update(n=>n-o.price),this.debouncedSaveCart())}editItem(e){const o=this.items().find(n=>n.id===e);o&&(this.calculator?.setDisplay(o.price.toFixed(2)),this.removeItem(e))}completeSale(e){this.currentRegister()?(this.calculator?.hasPendingValue()&&this.calculator.handleEnter(),0!==this.items().length&&!this.isProcessing()&&(this.selectedPaymentMethod.set(e),this.showPaymentModal.set(!0),"cash"===e&&(this.cashReceived.set(""),this.change.set(0),setTimeout(()=>{this.cashReceivedInput?.nativeElement&&(this.cashReceivedInput.nativeElement.focus(),this.cashReceivedInput.nativeElement.select())},100)))):this.toastService.show("Please open a register before making sales.","info")}onCashReceivedChange(){const e=parseFloat(this.cashReceived()),o=this.total();!isNaN(e)&&e>=o?this.change.set(e-o):this.change.set(0)}cancelPayment(){this.showPaymentModal.set(!1),this.selectedPaymentMethod.set(null),this.cashReceived.set(""),this.change.set(0)}confirmPayment(){const e=this.selectedPaymentMethod();if(!e)return;if("cash"===e){const r=parseFloat(this.cashReceived());if(isNaN(r)||r<this.total())return void this.toastService.show("Please enter a valid cash amount greater than or equal to the total.","info")}this.isProcessing.set(!0);const o=this.total(),n=this.change(),a=this.currentRegister(),s={items:this.items().map((r,_)=>({productName:r.description||`Item ${_+1}`,quantity:r.weight||1,unitPrice:r.pricePerKg||r.price,subtotal:r.price,total:r.price,weight:r.weight,pricePerKg:r.pricePerKg})),subtotal:o,total:o,paymentMethod:e,paymentDetails:"cash"===e?{cashReceived:parseFloat(this.cashReceived()),change:n}:{},status:"completed",register:a?._id};this.saleService.createSale(s).subscribe({next:r=>{this.isProcessing.set(!1),this.showPaymentModal.set(!1);let _=`Sale completed successfully! Total: $${o.toFixed(2)}`;"cash"===e&&n>0&&(_+=` | Cash Received: $${parseFloat(this.cashReceived()).toFixed(2)} | Change: $${n.toFixed(2)}`),this.toastService.show(_,"success");const m=this.authService.getCurrentUser();"styled"===(localStorage.getItem("printer.mode")||"plain")?this.receiptGeneratorService.generateReceipt(r,e,n,m).subscribe({next:g=>{this.receiptGeneratorService.printReceipt(g,"html")},error:g=>{console.error("Error generating styled receipt:",g)}}):this.receiptGeneratorService.generatePlainTextReceipt(r,e,n,m).subscribe({next:g=>{this.receiptGeneratorService.printReceipt(g,"plain")},error:g=>{console.error("Error generating plain-text receipt:",g)}}),this.activeCartId()&&this.cartService.updateCart(this.activeCartId(),{status:"completed"}).subscribe({next:()=>{this.activeCartId.set(null)},error:g=>{console.error("Error updating cart status:",g)}}),this.clearAll(),this.selectedPaymentMethod.set(null),this.cashReceived.set(""),this.change.set(0)},error:r=>{console.error("Error creating sale:",r),this.isProcessing.set(!1),this.toastService.show("Error processing sale. Please try again.","error")}})}static{this.\u0275fac=function(o){return new(o||c)(t.rXU(I.x),t.rXU(E.m),t.rXU(R.u),t.rXU(k.P),t.rXU(w.e),t.rXU(T.n),t.rXU(S.h),t.rXU(j.f),t.rXU(u.Ix))}}static{this.\u0275cmp=t.VBU({type:c,selectors:[["app-cashier"]],viewQuery:function(o,n){if(1&o&&(t.GBs(h.E,5),t.GBs(A,5)),2&o){let a;t.mGM(a=t.lsd())&&(n.calculator=a.first),t.mGM(a=t.lsd())&&(n.cashReceivedInput=a.first)}},hostBindings:function(o,n){1&o&&t.bIt("keydown",function(s){return n.handleKeyboardEvent(s)},t.EBC)},decls:62,vars:48,consts:[["noItems",""],["cashReceivedInput",""],[1,"cashier-container"],["class","register-warning",4,"ngIf"],[1,"cashier-content"],["role","tablist","aria-label","Cashier Tabs",1,"mobile-tabs"],["type","button","role","tab",1,"tab-btn",3,"click","aria-selected"],[1,"fas","fa-calculator"],[1,"fas","fa-list"],[1,"calculator-section"],[3,"addItem","multiplyConfirm","looseProductRequest","lastItemPrice","itemsCount"],[1,"sales-section"],[1,"items-panel"],[1,"panel-header"],[1,"header-actions"],["class","items-list",4,"ngIf","ngIfElse"],[1,"total-section"],[1,"total-display"],[1,"total-label"],[1,"total-value"],[1,"total-actions"],[1,"item-count"],[1,"clear-all-btn",3,"click","disabled","title"],[1,"fas","fa-trash"],[1,"btn-text"],[1,"payment-section"],[1,"payment-buttons"],[1,"payment-btn","cash",3,"click","disabled"],[1,"fas","fa-money-bill-wave"],[1,"payment-btn","card",3,"click","disabled"],[1,"fas","fa-credit-card"],[1,"payment-btn","transfer",3,"click","disabled"],[1,"fas","fa-exchange-alt"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"register-warning"],[1,"fas","fa-exclamation-triangle"],["routerLink","/registers",1,"open-register-link"],[1,"items-list"],["class","item-row",4,"ngFor","ngForOf"],[1,"item-row"],[1,"item-actions"],["title","Decrease quantity",1,"qty-btn","decrease",3,"click"],[1,"fas","fa-minus"],[1,"qty-display"],["title","Increase quantity",1,"qty-btn","increase",3,"click"],[1,"fas","fa-plus"],["title","Click to edit",1,"item-info",3,"click"],[1,"item-header"],[1,"item-number"],[1,"item-price-section"],["class","item-quantity",4,"ngIf"],["class","item-unit-price",4,"ngIf"],[1,"item-price"],["class","item-details",4,"ngIf"],[1,"item-end-actions"],["title","Remove item",1,"remove-btn",3,"click"],[1,"fas","fa-times"],[1,"item-quantity"],[1,"item-unit-price"],[1,"item-details"],["class","item-description",4,"ngIf"],["class","item-weight",4,"ngIf"],[1,"item-description"],[1,"fas","fa-tag"],[1,"item-weight"],[1,"fas","fa-weight"],[1,"no-items"],[1,"fas","fa-shopping-basket"],[1,"hint"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"fas"],[1,"close-btn",3,"click"],[1,"modal-body"],[1,"sale-total"],[1,"label"],[1,"value"],["class","cash-payment",4,"ngIf"],["class","confirmation-message",4,"ngIf"],[1,"modal-footer"],[1,"modal-btn","cancel",3,"click","disabled"],[1,"modal-btn","confirm",3,"click","disabled"],[4,"ngIf"],[1,"cash-payment"],[1,"form-group"],["for","cashReceived"],["id","cashReceived","type","number","step","0.01","min","0",1,"cash-input",3,"ngModelChange","ngModel","placeholder"],["class","change-display",4,"ngIf"],["class","error-message",4,"ngIf"],[1,"change-display"],[1,"change-label"],[1,"change-value"],[1,"error-message"],[1,"confirmation-message"],[1,"fas","fa-check-circle"],[1,"modal-content","loose-product-modal",3,"click"],[1,"scale-connection"],[1,"scale-status"],[1,"fas","fa-scale-balanced"],["class","scale-btn",3,"click",4,"ngIf"],["class","scale-btn disconnect",3,"click",4,"ngIf"],["class","scale-reading",4,"ngIf"],["for","productDescription"],["id","productDescription","type","text",1,"form-input",3,"ngModelChange","ngModel","placeholder"],["for","weight"],["id","weight","type","number","step","0.001","min","0","placeholder","Enter weight in kg",1,"form-input",3,"ngModelChange","ngModel","readonly"],["class","help-text",4,"ngIf"],["for","pricePerKg"],["id","pricePerKg","type","number","step","0.01","min","0","placeholder","Enter price per kg",1,"form-input",3,"ngModelChange","ngModel"],["class","total-preview",4,"ngIf"],[1,"modal-btn","cancel",3,"click"],[1,"modal-btn","confirm",3,"click"],[1,"fas","fa-check"],[1,"scale-btn",3,"click"],[1,"fas","fa-plug"],[1,"scale-btn","disconnect",3,"click"],[1,"fas","fa-unlink"],[1,"scale-reading"],[1,"reading-display"],[1,"fas","fa-weight-hanging"],[1,"weight"],[1,"unit"],["class","status-badge",4,"ngIf"],[1,"checkbox-label"],["type","checkbox",3,"change","checked"],[1,"status-badge"],[1,"help-text"],[1,"fas","fa-info-circle"],[1,"total-preview"],[1,"preview-label"],[1,"preview-value"]],template:function(o,n){if(1&o){const a=t.RV6();t.j41(0,"div",2),t.DNE(1,F,8,6,"div",3),t.j41(2,"div",4)(3,"div",5)(4,"button",6),t.bIt("click",function(){return i.eBV(a),i.Njj(n.activeTab.set("calculator"))}),t.nrm(5,"i",7),t.j41(6,"span"),t.EFF(7,"Calc"),t.k0s()(),t.j41(8,"button",6),t.bIt("click",function(){return i.eBV(a),i.Njj(n.activeTab.set("sales"))}),t.nrm(9,"i",8),t.j41(10,"span"),t.EFF(11,"Sales"),t.k0s()()(),t.j41(12,"div",9)(13,"app-calculator",10),t.bIt("addItem",function(r){return i.eBV(a),i.Njj(n.onCalculatorAdd(r))})("multiplyConfirm",function(r){return i.eBV(a),i.Njj(n.onCalculatorMultiplyConfirm(r))})("looseProductRequest",function(){return i.eBV(a),i.Njj(n.openLooseProductModal())}),t.k0s()(),t.j41(14,"div",11)(15,"div",12)(16,"div",13)(17,"h3"),t.nrm(18,"i",8),t.EFF(19),t.nI1(20,"translate"),t.k0s(),t.nrm(21,"div",14),t.k0s(),t.DNE(22,Y,2,1,"div",15)(23,K,8,6,"ng-template",null,0,t.C5r),t.k0s(),t.j41(25,"div",16)(26,"div",17)(27,"span",18),t.EFF(28),t.nI1(29,"translate"),t.k0s(),t.j41(30,"span",19),t.EFF(31),t.nI1(32,"appCurrency"),t.k0s()(),t.j41(33,"div",20)(34,"span",21),t.EFF(35),t.nI1(36,"translate"),t.k0s(),t.j41(37,"button",22),t.nI1(38,"translate"),t.bIt("click",function(){return i.eBV(a),i.Njj(n.clearAllItems())}),t.nrm(39,"i",23),t.j41(40,"span",24),t.EFF(41),t.nI1(42,"translate"),t.k0s()()()(),t.j41(43,"div",25)(44,"div",26)(45,"button",27),t.bIt("click",function(){return i.eBV(a),i.Njj(n.completeSale("cash"))}),t.nrm(46,"i",28),t.j41(47,"span"),t.EFF(48),t.nI1(49,"translate"),t.k0s()(),t.j41(50,"button",29),t.bIt("click",function(){return i.eBV(a),i.Njj(n.completeSale("card"))}),t.nrm(51,"i",30),t.j41(52,"span"),t.EFF(53),t.nI1(54,"translate"),t.k0s()(),t.j41(55,"button",31),t.bIt("click",function(){return i.eBV(a),i.Njj(n.completeSale("transfer"))}),t.nrm(56,"i",32),t.j41(57,"span"),t.EFF(58),t.nI1(59,"translate"),t.k0s()()()()()(),t.DNE(60,J,28,28,"div",33)(61,it,43,33,"div",33),t.k0s()}if(2&o){const a=t.sdS(24);t.R7$(),t.Y8G("ngIf",!n.currentRegister()),t.R7$(3),t.jOp("aria-selected",t.mNQ("calculator"===n.activeTab())),t.R7$(4),t.jOp("aria-selected",t.mNQ("sales"===n.activeTab())),t.R7$(4),t.AVh("mobile-hidden","calculator"!==n.activeTab()),t.R7$(),t.Y8G("lastItemPrice",n.getLastItemPrice())("itemsCount",n.items().length),t.R7$(2),t.AVh("mobile-hidden","sales"!==n.activeTab()),t.R7$(4),t.SpI(" ",t.bMT(20,30,"CASHIER.ITEMS.TITLE")," "),t.R7$(3),t.Y8G("ngIf",n.items().length>0)("ngIfElse",a),t.R7$(6),t.JRh(t.bMT(29,32,"CASHIER.TOTAL_LABEL")),t.R7$(3),t.JRh(t.bMT(32,34,n.total())),t.R7$(4),t.Lme("",n.items().length," ",t.bMT(36,36,"CASHIER.ITEMS.TITLE")),t.R7$(2),t.Y8G("title",t.mNQ(t.bMT(38,38,"GLOBAL.CLEAR")))("disabled",0===n.items().length),t.R7$(4),t.JRh(t.bMT(42,40,"GLOBAL.CLEAR")),t.R7$(4),t.Y8G("disabled",0===n.items().length||n.isProcessing()),t.R7$(3),t.JRh(t.bMT(49,42,"CASHIER.PAYMENTS.CASH")),t.R7$(2),t.Y8G("disabled",0===n.items().length||n.isProcessing()),t.R7$(3),t.JRh(t.bMT(54,44,"CASHIER.PAYMENTS.CARD")),t.R7$(2),t.Y8G("disabled",0===n.items().length||n.isProcessing()),t.R7$(3),t.JRh(t.bMT(59,46,"CASHIER.PAYMENTS.TRANSFER")),t.R7$(2),t.Y8G("ngIf",n.showPaymentModal()),t.R7$(),t.Y8G("ngIf",n.showLooseProductModal())}},dependencies:[P.MD,P.Sq,P.bT,p.YN,p.me,p.Q0,p.BC,p.VZ,p.vS,v.Wk,h.E,b.D,y.o],styles:['@import"https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap";.dark-theme[_ngcontent-%COMP%]{--neumorphic-bg: #1a1d24;--neumorphic-surface: #222831;--text-primary: #e5e7eb;--text-secondary: #9ca3af;--text-muted: #6b7280;--bg-primary: #1a1d24;--bg-secondary: #222831;--bg-tertiary: #2d3139;--bg-hover: #3a3f4b;--bg-active: #4a5161;--border-color: #3a3f4b;--card-bg: #222831;--input-bg: #2d3139;--sidebar-text: rgba(255, 255, 255, .7);--sidebar-text-active: #ffffff;--shadow-neumorphic: 6px 6px 12px rgba(0, 0, 0, .4), -6px -6px 12px rgba(255, 255, 255, .02);--shadow-neumorphic-sm: 3px 3px 6px rgba(0, 0, 0, .3), -3px -3px 6px rgba(255, 255, 255, .02);--shadow-neumorphic-lg: 9px 9px 16px rgba(0, 0, 0, .5), -9px -9px 16px rgba(255, 255, 255, .03);--shadow-neumorphic-inset: inset 3px 3px 6px rgba(0, 0, 0, .3), inset -3px -3px 6px rgba(255, 255, 255, .02);background-color:var(--bg-primary);color:var(--text-primary)}.cashier-container[_ngcontent-%COMP%]{padding:.75rem;background-color:#ffffffd9;height:100%;overflow:hidden;display:flex;flex-direction:column}.cashier-container[_ngcontent-%COMP%]   .register-warning[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:.75rem 1rem;background:linear-gradient(135deg,#ed893626,#ed89361a);border:1px solid rgba(237,137,54,.3);border-radius:16px;margin-bottom:.75rem;color:#dd6b20;font-weight:500}.cashier-container[_ngcontent-%COMP%]   .register-warning[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.125rem;color:#ed8936}.cashier-container[_ngcontent-%COMP%]   .register-warning[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1}.cashier-container[_ngcontent-%COMP%]   .register-warning[_ngcontent-%COMP%]   .open-register-link[_ngcontent-%COMP%]{color:#2d1674;text-decoration:none;font-weight:600;padding:.25rem .75rem;background:#fff;border-radius:12px;transition:all .2s ease}.cashier-container[_ngcontent-%COMP%]   .register-warning[_ngcontent-%COMP%]   .open-register-link[_ngcontent-%COMP%]:hover{background:#2d1674;color:#fff}.cashier-container[_ngcontent-%COMP%]   .cashier-content[_ngcontent-%COMP%]   .mobile-tabs[_ngcontent-%COMP%]{display:none;gap:.5rem;margin-bottom:.5rem}.cashier-container[_ngcontent-%COMP%]   .cashier-content[_ngcontent-%COMP%]   .mobile-tabs[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;padding:.5rem .75rem;border-radius:8px;border:none;background:#2d16740f;color:#262626;cursor:pointer;font-weight:700}.cashier-container[_ngcontent-%COMP%]   .cashier-content[_ngcontent-%COMP%]   .mobile-tabs[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem}.cashier-container[_ngcontent-%COMP%]   .cashier-content[_ngcontent-%COMP%]   .mobile-tabs[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%]:hover{background:#2d167417}.cashier-container[_ngcontent-%COMP%]   .cashier-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:.75rem;max-width:1600px;margin:0 auto;flex:1;overflow:hidden;width:100%}.cashier-container[_ngcontent-%COMP%]   .cashier-content[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{width:24px;height:24px;border-radius:50%;border:none;background:#fc8181;color:#e53e3e;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:.75rem;transition:all .12s}.cashier-container[_ngcontent-%COMP%]   .cashier-content[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:#f56565;color:#fff;transform:scale(1.05)}.cashier-container[_ngcontent-%COMP%]   .cashier-content[_ngcontent-%COMP%]   .calculator-section[_ngcontent-%COMP%]{margin:0 1rem}@media(max-width:576px){.cashier-container[_ngcontent-%COMP%]   .cashier-content[_ngcontent-%COMP%]   .mobile-tabs[_ngcontent-%COMP%]{display:flex}.cashier-container[_ngcontent-%COMP%]   .cashier-content[_ngcontent-%COMP%]   .mobile-hidden[_ngcontent-%COMP%]{display:none!important}}@media(max-width:768px){.cashier-container[_ngcontent-%COMP%]   .payment-section[_ngcontent-%COMP%]{padding:.75rem 1rem}.cashier-container[_ngcontent-%COMP%]   .payment-section[_ngcontent-%COMP%]   .payment-buttons[_ngcontent-%COMP%]{gap:.75rem}.cashier-container[_ngcontent-%COMP%]   .payment-section[_ngcontent-%COMP%]   .payment-buttons[_ngcontent-%COMP%]   .payment-btn[_ngcontent-%COMP%]{min-height:56px;padding:.6rem .8rem;font-size:1rem}.cashier-container[_ngcontent-%COMP%]   .payment-section[_ngcontent-%COMP%]   .payment-buttons[_ngcontent-%COMP%]   .payment-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.45rem}}@media(max-width:576px){.cashier-container[_ngcontent-%COMP%]   .total-section[_ngcontent-%COMP%]   .total-actions[_ngcontent-%COMP%]{flex-direction:row-reverse}.cashier-container[_ngcontent-%COMP%]   .total-section[_ngcontent-%COMP%]   .total-actions[_ngcontent-%COMP%]   .clear-all-btn[_ngcontent-%COMP%]   .btn-text[_ngcontent-%COMP%]{display:none}.cashier-container[_ngcontent-%COMP%]   .total-section[_ngcontent-%COMP%]   .total-actions[_ngcontent-%COMP%]   .clear-all-btn[_ngcontent-%COMP%]{padding:.35rem 0;min-width:40px}.cashier-container[_ngcontent-%COMP%]   .payment-section[_ngcontent-%COMP%]{padding:.5rem .75rem;display:flex;flex-direction:row}.cashier-container[_ngcontent-%COMP%]   .payment-section[_ngcontent-%COMP%]   .payment-buttons[_ngcontent-%COMP%]{gap:.5rem;grid-template-columns:auto auto auto}.cashier-container[_ngcontent-%COMP%]   .payment-section[_ngcontent-%COMP%]   .payment-buttons[_ngcontent-%COMP%]   .payment-btn[_ngcontent-%COMP%]{min-height:48px;padding:.5rem .75rem;font-size:.98rem;flex-direction:row;justify-content:flex-start;align-items:center;gap:.75rem}.cashier-container[_ngcontent-%COMP%]   .payment-section[_ngcontent-%COMP%]   .payment-buttons[_ngcontent-%COMP%]   .payment-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem}.cashier-container[_ngcontent-%COMP%]   .payment-section[_ngcontent-%COMP%]   .payment-buttons[_ngcontent-%COMP%]   .payment-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}}.sales-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem;overflow-y:auto;max-height:100%}.sales-section[_ngcontent-%COMP%]   .items-panel[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 2px 8px #0000001a;overflow:hidden;flex:1;display:flex;flex-direction:column;min-height:0}.sales-section[_ngcontent-%COMP%]   .items-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]{padding:.75rem;border-bottom:2px solid #e5e7eb;display:flex;justify-content:space-between;align-items:center;background:#5a5959;flex-shrink:0}.sales-section[_ngcontent-%COMP%]   .items-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;margin:0;display:flex;align-items:center;gap:.75rem}.sales-section[_ngcontent-%COMP%]   .items-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#2d1674}.sales-section[_ngcontent-%COMP%]   .items-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.sales-section[_ngcontent-%COMP%]   .items-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .item-count[_ngcontent-%COMP%]{background:#2d1674;color:#fff;padding:.25rem .75rem;border-radius:12px;font-size:1rem;font-weight:600}.sales-section[_ngcontent-%COMP%]   .items-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .clear-all-btn[_ngcontent-%COMP%]{padding:.5rem .75rem;border:none;border-radius:8px;background:#f56565;color:#fff;font-size:.875rem;font-weight:600;cursor:pointer;display:flex;align-items:center;gap:.5rem;transition:all .2s}.sales-section[_ngcontent-%COMP%]   .items-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .clear-all-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.875rem}.sales-section[_ngcontent-%COMP%]   .items-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .clear-all-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#f23535;transform:translateY(-1px)}.sales-section[_ngcontent-%COMP%]   .items-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .clear-all-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.sales-section[_ngcontent-%COMP%]   .items-panel[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]{padding:0;overflow-y:auto;display:flex;flex-direction:column;gap:0;flex:1;min-height:0;border:1px solid #d1d5db;border-radius:8px;overflow:hidden}.sales-section[_ngcontent-%COMP%]   .items-panel[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   .item-row[_ngcontent-%COMP%]{display:flex;align-items:center;padding:.75rem .5rem;background:#fff;border-bottom:1px solid #d1d5db;transition:all .2s;cursor:pointer;gap:.5rem}.sales-section[_ngcontent-%COMP%]   .items-panel[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   .item-row[_ngcontent-%COMP%]:hover{background:#fff}.sales-section[_ngcontent-%COMP%]   .items-panel[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   .item-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.sales-section[_ngcontent-%COMP%]   .items-panel[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   .item-row[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem;cursor:pointer;flex:1;min-width:0;padding:0;border-radius:0;transition:background .2s;position:relative}.sales-section[_ngcontent-%COMP%]   .items-panel[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   .item-row[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]:hover{background:none}.sales-section[_ngcontent-%COMP%]   .items-panel[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   .item-row[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]   .item-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.15rem;align-items:flex-start;width:100%}.sales-section[_ngcontent-%COMP%]   .items-panel[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   .item-row[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]   .item-number[_ngcontent-%COMP%]{font-weight:600;color:#595959;font-size:.75rem;display:none}.sales-section[_ngcontent-%COMP%]   .items-panel[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   .item-row[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]   .item-price-section[_ngcontent-%COMP%]{display:flex!important;align-items:baseline;gap:.25rem;order:-1;flex-wrap:wrap;margin-bottom:.25rem}.sales-section[_ngcontent-%COMP%]   .items-panel[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   .item-row[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]   .item-price-section[_ngcontent-%COMP%]   .item-quantity[_ngcontent-%COMP%]{font-size:.8rem;font-weight:600;color:#595959}.sales-section[_ngcontent-%COMP%]   .items-panel[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   .item-row[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]   .item-price-section[_ngcontent-%COMP%]   .item-unit-price[_ngcontent-%COMP%]{font-size:.7rem;color:#8c8c8c}.sales-section[_ngcontent-%COMP%]   .items-panel[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   .item-row[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]   .item-price-section[_ngcontent-%COMP%]   .item-price[_ngcontent-%COMP%]{font-size:1rem;font-weight:700;color:#262626;margin-left:auto}.sales-section[_ngcontent-%COMP%]   .items-panel[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   .item-row[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]   .item-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.15rem;font-size:.7rem;color:#8c8c8c;margin-top:.05rem}.sales-section[_ngcontent-%COMP%]   .items-panel[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   .item-row[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]   .item-details[_ngcontent-%COMP%]   .item-description[_ngcontent-%COMP%], .sales-section[_ngcontent-%COMP%]   .items-panel[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   .item-row[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]   .item-details[_ngcontent-%COMP%]   .item-weight[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.25rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.sales-section[_ngcontent-%COMP%]   .items-panel[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   .item-row[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]   .item-details[_ngcontent-%COMP%]   .item-description[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .sales-section[_ngcontent-%COMP%]   .items-panel[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   .item-row[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]   .item-details[_ngcontent-%COMP%]   .item-weight[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#8c8c8c;font-size:.65rem;flex-shrink:0}.sales-section[_ngcontent-%COMP%]   .items-panel[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   .item-row[_ngcontent-%COMP%]   .item-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;flex-shrink:0;min-width:92px;justify-content:center}.sales-section[_ngcontent-%COMP%]   .items-panel[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   .item-row[_ngcontent-%COMP%]   .item-actions[_ngcontent-%COMP%]   .qty-btn[_ngcontent-%COMP%]{width:22px;height:22px;border:none;background:#d1d5db;color:#262626;border-radius:4px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s;font-size:.6rem;font-weight:600;padding:0}.sales-section[_ngcontent-%COMP%]   .items-panel[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   .item-row[_ngcontent-%COMP%]   .item-actions[_ngcontent-%COMP%]   .qty-btn[_ngcontent-%COMP%]:hover{background:#9ca3af;transform:scale(1.05)}.sales-section[_ngcontent-%COMP%]   .items-panel[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   .item-row[_ngcontent-%COMP%]   .item-actions[_ngcontent-%COMP%]   .qty-btn.decrease[_ngcontent-%COMP%]{background:#d1d5db}.sales-section[_ngcontent-%COMP%]   .items-panel[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   .item-row[_ngcontent-%COMP%]   .item-actions[_ngcontent-%COMP%]   .qty-btn.decrease[_ngcontent-%COMP%]:hover{background:#9ca3af}.sales-section[_ngcontent-%COMP%]   .items-panel[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   .item-row[_ngcontent-%COMP%]   .item-actions[_ngcontent-%COMP%]   .qty-btn.increase[_ngcontent-%COMP%]{background:#d1d5db}.sales-section[_ngcontent-%COMP%]   .items-panel[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   .item-row[_ngcontent-%COMP%]   .item-actions[_ngcontent-%COMP%]   .qty-btn.increase[_ngcontent-%COMP%]:hover{background:#9ca3af}.sales-section[_ngcontent-%COMP%]   .items-panel[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   .item-row[_ngcontent-%COMP%]   .item-actions[_ngcontent-%COMP%]   .qty-display[_ngcontent-%COMP%]{font-weight:600;font-size:.85rem;color:#262626;text-align:center;width:34px}.sales-section[_ngcontent-%COMP%]   .items-panel[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   .item-row[_ngcontent-%COMP%]   .item-actions[_ngcontent-%COMP%]   .remove-btn[_ngcontent-%COMP%]{width:22px;height:22px;border:none;background:#d1d5db;color:#f56565;border-radius:4px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s;margin-left:.2rem;font-size:.6rem;padding:0}.sales-section[_ngcontent-%COMP%]   .items-panel[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   .item-row[_ngcontent-%COMP%]   .item-actions[_ngcontent-%COMP%]   .remove-btn[_ngcontent-%COMP%]:hover{background:#f56565;color:#fff;transform:scale(1.05)}.sales-section[_ngcontent-%COMP%]   .items-panel[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   .item-end-actions[_ngcontent-%COMP%]{display:flex;align-items:center;flex-shrink:0;margin-left:auto}.sales-section[_ngcontent-%COMP%]   .items-panel[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   .item-end-actions[_ngcontent-%COMP%]   .remove-btn[_ngcontent-%COMP%]{width:24px;height:24px;border-radius:50%;border:none;background:#fc8181;color:#fff;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:.75rem;transition:all .12s}.sales-section[_ngcontent-%COMP%]   .items-panel[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   .item-end-actions[_ngcontent-%COMP%]   .remove-btn[_ngcontent-%COMP%]:hover{background:#f56565;color:#fff;transform:scale(1.05)}.sales-section[_ngcontent-%COMP%]   .items-panel[_ngcontent-%COMP%]   .no-items[_ngcontent-%COMP%]{padding:3rem 2rem;text-align:center;color:#595959;display:flex;flex-direction:column;align-items:center;justify-content:center;flex:1}.sales-section[_ngcontent-%COMP%]   .items-panel[_ngcontent-%COMP%]   .no-items[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:4rem;opacity:.3;margin-bottom:1rem}.sales-section[_ngcontent-%COMP%]   .items-panel[_ngcontent-%COMP%]   .no-items[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.25rem 0;font-size:1.1rem}.sales-section[_ngcontent-%COMP%]   .items-panel[_ngcontent-%COMP%]   .no-items[_ngcontent-%COMP%]   p.hint[_ngcontent-%COMP%]{font-size:.875rem;font-style:italic}.sales-section[_ngcontent-%COMP%]   .total-section[_ngcontent-%COMP%]{background:linear-gradient(180deg,#5a5959,#ffffffd9);border-radius:14px;padding:0 1rem;box-shadow:0 6px 18px #1018280f;flex-shrink:0;display:flex;align-items:center;justify-content:space-between;gap:1rem}.sales-section[_ngcontent-%COMP%]   .total-section[_ngcontent-%COMP%]   .total-display[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.sales-section[_ngcontent-%COMP%]   .total-section[_ngcontent-%COMP%]   .total-display[_ngcontent-%COMP%]   .total-label[_ngcontent-%COMP%]{font-size:.85rem;font-weight:600;color:#595959;text-transform:uppercase;letter-spacing:1px}.sales-section[_ngcontent-%COMP%]   .total-section[_ngcontent-%COMP%]   .total-display[_ngcontent-%COMP%]   .total-value[_ngcontent-%COMP%]{font-size:2.25rem;font-weight:800;color:#2d1674;line-height:1}.sales-section[_ngcontent-%COMP%]   .total-section[_ngcontent-%COMP%]   .total-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.sales-section[_ngcontent-%COMP%]   .total-section[_ngcontent-%COMP%]   .total-actions[_ngcontent-%COMP%]   .item-count[_ngcontent-%COMP%]{background:#2d16741f;color:#2d1674;padding:.25rem .6rem;border-radius:999px;font-size:.95rem;font-weight:700;display:inline-flex;align-items:center;gap:.5rem}.sales-section[_ngcontent-%COMP%]   .total-section[_ngcontent-%COMP%]   .total-actions[_ngcontent-%COMP%]   .clear-all-btn[_ngcontent-%COMP%]{padding:.45rem .9rem;border-radius:32px;border:none;background:#f56565;color:#fff;display:inline-flex;align-items:center;gap:.5rem;cursor:pointer;font-weight:700;box-shadow:0 6px 18px #1018280a;transition:all .12s}.sales-section[_ngcontent-%COMP%]   .total-section[_ngcontent-%COMP%]   .total-actions[_ngcontent-%COMP%]   .clear-all-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.9rem}.sales-section[_ngcontent-%COMP%]   .total-section[_ngcontent-%COMP%]   .total-actions[_ngcontent-%COMP%]   .clear-all-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#f33f3f;transform:translateY(-1px)}.sales-section[_ngcontent-%COMP%]   .total-section[_ngcontent-%COMP%]   .total-actions[_ngcontent-%COMP%]   .clear-all-btn[_ngcontent-%COMP%]:disabled{opacity:.45;cursor:not-allowed}@media(max-width:576px){.sales-section[_ngcontent-%COMP%]   .total-section[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.sales-section[_ngcontent-%COMP%]   .total-section[_ngcontent-%COMP%]   .total-display[_ngcontent-%COMP%]{align-items:flex-start}.sales-section[_ngcontent-%COMP%]   .total-section[_ngcontent-%COMP%]   .total-actions[_ngcontent-%COMP%]{justify-content:flex-start;margin-top:.5rem}}.sales-section[_ngcontent-%COMP%]   .payment-section[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:1rem 1.5rem;box-shadow:0 2px 8px #0000001a;flex-shrink:0}.sales-section[_ngcontent-%COMP%]   .payment-section[_ngcontent-%COMP%]   .payment-title[_ngcontent-%COMP%]{font-size:.95rem;font-weight:600;color:#262626;margin:0 0 1rem;text-align:center}.sales-section[_ngcontent-%COMP%]   .payment-section[_ngcontent-%COMP%]   .payment-buttons[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:1rem}.sales-section[_ngcontent-%COMP%]   .payment-section[_ngcontent-%COMP%]   .payment-buttons[_ngcontent-%COMP%]   .payment-btn[_ngcontent-%COMP%]{padding:.8rem 1rem;border:none;border-radius:12px;font-size:1.05rem;font-weight:600;cursor:pointer;display:flex;flex-direction:column;align-items:center;gap:.6rem;transition:all .18s;box-shadow:0 6px 18px #1018280a;min-height:64px}.sales-section[_ngcontent-%COMP%]   .payment-section[_ngcontent-%COMP%]   .payment-buttons[_ngcontent-%COMP%]   .payment-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.6rem}.sales-section[_ngcontent-%COMP%]   .payment-section[_ngcontent-%COMP%]   .payment-buttons[_ngcontent-%COMP%]   .payment-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-3px);box-shadow:0 8px 20px #10182814}.sales-section[_ngcontent-%COMP%]   .payment-section[_ngcontent-%COMP%]   .payment-buttons[_ngcontent-%COMP%]   .payment-btn[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(-2px)}.sales-section[_ngcontent-%COMP%]   .payment-section[_ngcontent-%COMP%]   .payment-buttons[_ngcontent-%COMP%]   .payment-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.sales-section[_ngcontent-%COMP%]   .payment-section[_ngcontent-%COMP%]   .payment-buttons[_ngcontent-%COMP%]   .payment-btn.cash[_ngcontent-%COMP%]{background:#48bb78;color:#fff}.sales-section[_ngcontent-%COMP%]   .payment-section[_ngcontent-%COMP%]   .payment-buttons[_ngcontent-%COMP%]   .payment-btn.cash[_ngcontent-%COMP%]:hover:not(:disabled){background:#389860}.sales-section[_ngcontent-%COMP%]   .payment-section[_ngcontent-%COMP%]   .payment-buttons[_ngcontent-%COMP%]   .payment-btn.card[_ngcontent-%COMP%]{background:#2d1674;color:#fff}.sales-section[_ngcontent-%COMP%]   .payment-section[_ngcontent-%COMP%]   .payment-buttons[_ngcontent-%COMP%]   .payment-btn.card[_ngcontent-%COMP%]:hover:not(:disabled){background:#1c0e49}.sales-section[_ngcontent-%COMP%]   .payment-section[_ngcontent-%COMP%]   .payment-buttons[_ngcontent-%COMP%]   .payment-btn.transfer[_ngcontent-%COMP%]{background:#4299e1;color:#fff}.sales-section[_ngcontent-%COMP%]   .payment-section[_ngcontent-%COMP%]   .payment-buttons[_ngcontent-%COMP%]   .payment-btn.transfer[_ngcontent-%COMP%]:hover:not(:disabled){background:#2180cf}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#0009;display:flex;align-items:center;justify-content:center;z-index:2000;animation:_ngcontent-%COMP%_fadeIn .2s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:16px;width:90%;max-width:500px;box-shadow:0 8px 32px #0003;animation:_ngcontent-%COMP%_slideUp .3s ease-out}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(50px);opacity:0}to{transform:translateY(0);opacity:1}}.modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{padding:2rem;border-bottom:2px solid #7946b4;display:flex;justify-content:space-between;align-items:center;background:linear-gradient(135deg,#2d1674,#1c0e49);border-radius:16px 16px 0 0}.modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:600;color:#fff;display:flex;align-items:center;gap:.75rem}.modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.75rem}.modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{width:24px;height:24px;border-radius:50%;border:none;background:#fed7d7;color:#c53030;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:.75rem;transition:all .12s;flex-shrink:0}.modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:#feb2b2;transform:scale(1.05)}.modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{padding:2rem}.modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .sale-total[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1.5rem;background:#ffffffd9;border-radius:12px;margin-bottom:2rem}.modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .sale-total[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:#595959}.modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .sale-total[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#2d1674}.modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .cash-payment[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .cash-payment[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:600;color:#262626;margin-bottom:.5rem;font-size:1rem}.modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .cash-payment[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .cash-input[_ngcontent-%COMP%]{width:100%;padding:1rem;border:2px solid #e5e7eb;border-radius:8px;font-size:1.5rem;font-weight:600;transition:all .2s}.modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .cash-payment[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .cash-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#2d1674;box-shadow:0 0 0 3px #2d16741a}.modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .cash-payment[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .cash-input.invalid[_ngcontent-%COMP%]{border-color:#f56565}.modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .cash-payment[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .cash-input.invalid[_ngcontent-%COMP%]:focus{border-color:#f56565;box-shadow:0 0 0 3px #f565651a}.modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .cash-payment[_ngcontent-%COMP%]   .change-display[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1.5rem;background:#48bb781a;border:2px solid #48bb78;border-radius:12px;margin-bottom:1rem}.modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .cash-payment[_ngcontent-%COMP%]   .change-display[_ngcontent-%COMP%]   .change-label[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:#48bb78}.modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .cash-payment[_ngcontent-%COMP%]   .change-display[_ngcontent-%COMP%]   .change-value[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#48bb78}.modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .cash-payment[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:1rem;background:#f565651a;border:1px solid #f56565;border-radius:8px;color:#f56565;font-weight:500}.modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .cash-payment[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.25rem}.modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .confirmation-message[_ngcontent-%COMP%]{text-align:center;padding:2rem}.modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .confirmation-message[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:4rem;color:#48bb78;margin-bottom:1rem}.modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .confirmation-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1rem;color:#595959;margin:0}.modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]{padding:1.5rem 2rem;border-top:1px solid #e5e7eb;display:flex;gap:1rem;justify-content:flex-end}.modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .modal-btn[_ngcontent-%COMP%]{padding:1rem 2rem;border:none;border-radius:8px;font-size:1rem;font-weight:600;cursor:pointer;transition:all .2s}.modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .modal-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .modal-btn.cancel[_ngcontent-%COMP%]{background:#595959;color:#fff}.modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .modal-btn.cancel[_ngcontent-%COMP%]:hover:not(:disabled){background:#404040}.modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .modal-btn.confirm[_ngcontent-%COMP%]{background:#48bb78;color:#fff;min-width:160px}.modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .modal-btn.confirm[_ngcontent-%COMP%]:hover:not(:disabled){background:#389860;transform:translateY(-2px);box-shadow:0 4px 12px #48bb784d}@media(max-width:992px){.cashier-container[_ngcontent-%COMP%]{padding:1rem}.cashier-container[_ngcontent-%COMP%]   .cashier-content[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1.5rem;grid-auto-rows:max-content}}.loose-product-btn[_ngcontent-%COMP%]{margin-top:1rem;width:100%;padding:1rem;border:none;border-radius:12px;background:linear-gradient(135deg,#2d1674,#1e0f52);color:#fff;font-size:1rem;font-weight:600;cursor:pointer;transition:all .2s;box-shadow:0 6px 20px #2d167440;display:flex;align-items:center;justify-content:center;gap:.5rem}.loose-product-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.25rem}.loose-product-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 16px #ff8c4266}.loose-product-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.loose-product-modal[_ngcontent-%COMP%]{max-width:600px!important;width:95%!important}.loose-product-modal[_ngcontent-%COMP%]   .scale-connection[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2d1674,#1e0f52);border-radius:12px;padding:1.5rem;margin-bottom:1.5rem;display:flex;align-items:center;justify-content:space-between;gap:1rem;color:#fff}.loose-product-modal[_ngcontent-%COMP%]   .scale-connection[_ngcontent-%COMP%]   .scale-status[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;font-size:1rem;font-weight:600}.loose-product-modal[_ngcontent-%COMP%]   .scale-connection[_ngcontent-%COMP%]   .scale-status[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem}.loose-product-modal[_ngcontent-%COMP%]   .scale-connection[_ngcontent-%COMP%]   .scale-status[_ngcontent-%COMP%]   i.connected[_ngcontent-%COMP%]{color:#48bb78;animation:_ngcontent-%COMP%_pulse 2s ease-in-out infinite}.loose-product-modal[_ngcontent-%COMP%]   .scale-connection[_ngcontent-%COMP%]   .scale-btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border:2px solid white;border-radius:8px;background:#fff3;color:#fff;font-weight:600;cursor:pointer;transition:all .2s;display:flex;align-items:center;gap:.5rem}.loose-product-modal[_ngcontent-%COMP%]   .scale-connection[_ngcontent-%COMP%]   .scale-btn[_ngcontent-%COMP%]:hover{background:#ffffff4d;transform:translateY(-2px)}.loose-product-modal[_ngcontent-%COMP%]   .scale-connection[_ngcontent-%COMP%]   .scale-btn.disconnect[_ngcontent-%COMP%]{background:#ef44444d;border-color:#f56565}.loose-product-modal[_ngcontent-%COMP%]   .scale-connection[_ngcontent-%COMP%]   .scale-btn.disconnect[_ngcontent-%COMP%]:hover{background:#ef444480}.loose-product-modal[_ngcontent-%COMP%]   .scale-reading[_ngcontent-%COMP%]{background:#ffffffd9;border-radius:12px;padding:1.5rem;margin-bottom:1.5rem;border:2px solid #d1d5db}.loose-product-modal[_ngcontent-%COMP%]   .scale-reading[_ngcontent-%COMP%]   .reading-display[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:1.5rem;margin-bottom:1rem;display:flex;align-items:center;gap:1rem;border:2px solid #d1d5db;transition:all .3s}.loose-product-modal[_ngcontent-%COMP%]   .scale-reading[_ngcontent-%COMP%]   .reading-display.stable[_ngcontent-%COMP%]{border-color:#48bb78;background:linear-gradient(135deg,#48bb781a,#48bb7833)}.loose-product-modal[_ngcontent-%COMP%]   .scale-reading[_ngcontent-%COMP%]   .reading-display[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2rem;color:#2d1674}.loose-product-modal[_ngcontent-%COMP%]   .scale-reading[_ngcontent-%COMP%]   .reading-display[_ngcontent-%COMP%]   .weight[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;color:#262626}.loose-product-modal[_ngcontent-%COMP%]   .scale-reading[_ngcontent-%COMP%]   .reading-display[_ngcontent-%COMP%]   .unit[_ngcontent-%COMP%]{font-size:1.5rem;color:#595959;font-weight:600}.loose-product-modal[_ngcontent-%COMP%]   .scale-reading[_ngcontent-%COMP%]   .reading-display[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{margin-left:auto;background:#48bb78;color:#fff;padding:.5rem 1rem;border-radius:6px;font-size:.875rem;font-weight:600;display:flex;align-items:center;gap:.5rem}.loose-product-modal[_ngcontent-%COMP%]   .scale-reading[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;cursor:pointer;font-weight:500;-webkit-user-select:none;user-select:none}.loose-product-modal[_ngcontent-%COMP%]   .scale-reading[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:20px;height:20px;cursor:pointer}.loose-product-modal[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.loose-product-modal[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:600;color:#262626;margin-bottom:.5rem;font-size:.95rem}.loose-product-modal[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]{width:100%;padding:.875rem;border:2px solid #d1d5db;border-radius:8px;font-size:1rem;transition:all .2s}.loose-product-modal[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#2d1674;box-shadow:0 0 0 3px #ff8c421a}.loose-product-modal[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]:readonly{background:#ffffffd9;cursor:not-allowed}.loose-product-modal[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-input.invalid[_ngcontent-%COMP%]{border-color:#f56565}.loose-product-modal[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-input.invalid[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 3px #f565651a}.loose-product-modal[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .help-text[_ngcontent-%COMP%]{display:block;margin-top:.5rem;color:#595959;font-size:.875rem;font-style:italic;display:flex;align-items:center;gap:.5rem}.loose-product-modal[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .help-text[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#4299e1}.loose-product-modal[_ngcontent-%COMP%]   .total-preview[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2d1674,#1e0f52);border-radius:12px;padding:1.5rem;margin-top:1.5rem;display:flex;justify-content:space-between;align-items:center;color:#fff}.loose-product-modal[_ngcontent-%COMP%]   .total-preview[_ngcontent-%COMP%]   .preview-label[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600}.loose-product-modal[_ngcontent-%COMP%]   .total-preview[_ngcontent-%COMP%]   .preview-value[_ngcontent-%COMP%]{font-size:2rem;font-weight:700}.items-list[_ngcontent-%COMP%]   .item-row[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:.5rem}.items-list[_ngcontent-%COMP%]   .item-row[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]   .item-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.items-list[_ngcontent-%COMP%]   .item-row[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]   .item-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem;font-size:.875rem;color:#595959}.items-list[_ngcontent-%COMP%]   .item-row[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]   .item-details[_ngcontent-%COMP%]   .item-description[_ngcontent-%COMP%], .items-list[_ngcontent-%COMP%]   .item-row[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]   .item-details[_ngcontent-%COMP%]   .item-weight[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.items-list[_ngcontent-%COMP%]   .item-row[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]   .item-details[_ngcontent-%COMP%]   .item-description[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .items-list[_ngcontent-%COMP%]   .item-row[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]   .item-details[_ngcontent-%COMP%]   .item-weight[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#8c8c8c;font-size:.875rem}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.6}}@media(max-width:576px){.cashier-container[_ngcontent-%COMP%]   .cashier-content[_ngcontent-%COMP%]   .sales-section[_ngcontent-%COMP%]   .total-section[_ngcontent-%COMP%]{padding:0 1.5rem;flex-direction:row-reverse}.cashier-container[_ngcontent-%COMP%]   .cashier-content[_ngcontent-%COMP%]   .sales-section[_ngcontent-%COMP%]   .total-section[_ngcontent-%COMP%]   .total-display[_ngcontent-%COMP%]   .total-value[_ngcontent-%COMP%]{font-size:1.2rem}.loose-product-modal[_ngcontent-%COMP%]   .scale-connection[_ngcontent-%COMP%]{flex-direction:column;text-align:center}.loose-product-modal[_ngcontent-%COMP%]   .scale-reading[_ngcontent-%COMP%]   .reading-display[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center}}@media(max-width:576px){.cashier-container[_ngcontent-%COMP%]{padding-bottom:140px}.cashier-container[_ngcontent-%COMP%]   .total-section[_ngcontent-%COMP%]{position:fixed;left:8px;right:8px;bottom:68px;z-index:2500;border-radius:12px;padding:.5rem .75rem;box-shadow:0 8px 24px #10182814;display:flex;align-items:center;justify-content:space-between;background:linear-gradient(180deg,#5a5959,#ffffffd9)}.cashier-container[_ngcontent-%COMP%]   .total-section[_ngcontent-%COMP%]   .total-display[_ngcontent-%COMP%]   .total-value[_ngcontent-%COMP%]{font-size:1.1rem}.cashier-container[_ngcontent-%COMP%]   .total-section[_ngcontent-%COMP%]   .total-actions[_ngcontent-%COMP%]   .item-count[_ngcontent-%COMP%]{padding:.2rem .5rem}.cashier-container[_ngcontent-%COMP%]   .payment-section[_ngcontent-%COMP%]{position:fixed;left:0;right:0;bottom:0;z-index:2600;margin:0;border-radius:0;padding:.5rem;background:#5a5959;box-shadow:0 -6px 24px #10182814}.cashier-container[_ngcontent-%COMP%]   .payment-section[_ngcontent-%COMP%]   .payment-buttons[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center;flex:1}.cashier-container[_ngcontent-%COMP%]   .payment-section[_ngcontent-%COMP%]   .payment-btn[_ngcontent-%COMP%]{flex:1 1 auto;min-height:38px!important;padding:0rem 1rem;border-radius:10px;font-size:.95rem;display:inline-flex;align-items:center;justify-content:center}.cashier-container[_ngcontent-%COMP%]   .payment-section[_ngcontent-%COMP%]   .payment-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.1rem}.cashier-container[_ngcontent-%COMP%]   .payment-section[_ngcontent-%COMP%]   .payment-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}}']})}}return c})()}}]);