"use strict";(self.webpackChunkretail_pos=self.webpackChunkretail_pos||[]).push([[586],{2205:(I,_,s)=>{s.d(_,{SettingsComponent:()=>T});var g=s(9769),c=s(4341),M=s(8659),P=s(7314),u=s(3049),e=s(5547),h=s(2197),C=s(6845),m=s(4796),E=s(497),S=s(8397),O=s(9885);function b(a,p){1&a&&(e.j41(0,"button",28),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&a&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"TEMPLATES.TITLE")," "))}function f(a,p){if(1&a&&(e.j41(0,"option",29),e.EFF(1),e.k0s()),2&a){const n=p.$implicit;e.Y8G("value",n.code),e.R7$(),e.E5c(" ",n.symbol," - ",n.name," (",n.code,") ")}}let T=(()=>{class a{constructor(n,r,t,i,o,d){this.receiptGen=n,this.translationService=r,this.authService=t,this.currencyService=i,this.toastService=o,this.userService=d,this.printerMode="plain",this.displayName="",this.preferredLang="",this.userPrinterMode="inherit",this.selectedCurrency="USD"}get isAdmin(){return"admin"===this.authService.getCurrentUser()?.role}ngOnInit(){const n=localStorage.getItem("printer.mode");"plain"===n||"styled"===n?this.printerMode=n:(this.printerMode="plain",localStorage.setItem("printer.mode",this.printerMode)),this.userService.getUserSettings().subscribe({next:r=>{this.displayName=r.displayName||"",this.preferredLang=r.language||this.translationService.current||"en",this.userPrinterMode=r.printerMode||"inherit",this.selectedCurrency=r.currency||this.currencyService.getCode(),this.preferredLang&&this.translationService.setLanguage(this.preferredLang),this.selectedCurrency&&this.currencyService.setCurrency(this.selectedCurrency)},error:r=>{console.error("Failed to load user settings:",r),this.preferredLang=this.translationService.current||"en",this.selectedCurrency=this.currencyService.getCode(),this.userPrinterMode="inherit"}})}setPrinterMode(n){this.printerMode=n,localStorage.setItem("printer.mode",n)}saveUserSettings(){this.userService.updateUserSettings({displayName:this.displayName||"",language:this.preferredLang,printerMode:this.userPrinterMode,currency:this.selectedCurrency}).subscribe({next:r=>{this.preferredLang&&this.translationService.setLanguage(this.preferredLang),this.selectedCurrency&&this.currencyService.setCurrency(this.selectedCurrency),this.toastService.show(this.translationService.translate("SETTINGS.SAVED")||"Saved","success")},error:r=>{console.error("Failed to save user settings",r),this.toastService.show(this.translationService.translate("SETTINGS.SAVE_FAILED")||"Save failed","error")}})}previewReceipt(){const n={saleNumber:"PREVIEW-001",items:[{productName:"Sample Product",qty:1,unitPrice:9.99,total:9.99},{productName:"Another Item",qty:2,unitPrice:4.5,total:9}],total:18.99},r="cash",i={firstName:"Preview"};("plain"===this.printerMode?this.receiptGen.generatePlainTextReceipt(n,r,0,i):this.receiptGen.generateReceipt(n,r,0,i)).subscribe(d=>{const l=window.open("","_blank","width=480,height=640");l&&(l.document.write(d),l.document.close())})}static{this.\u0275fac=function(r){return new(r||a)(e.rXU(h.n),e.rXU(C.L),e.rXU(m.u),e.rXU(E.P),e.rXU(S.f),e.rXU(O.D))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-settings"]],decls:88,vars:73,consts:[[1,"page-container"],[3,"title","description"],[1,"header-actions"],[1,"btn","btn-primary",3,"click"],["class","btn btn-secondary","routerLink","/templates","title","Manage receipt templates",4,"ngIf"],[1,"card","setting-section"],[1,"setting-header"],["role","radiogroup","aria-label","Printer Mode",1,"options"],["role","radio","tabindex","0",1,"option-card",3,"click","keydown.enter"],[1,"option-left"],[1,"icon"],[1,"option-body"],[1,"title"],[1,"desc"],[1,"option-right"],[1,"check"],[1,"card","user-section"],[1,"form-row"],[1,"label"],["type","text",3,"ngModelChange","ngModel","placeholder"],[3,"ngModelChange","ngModel"],["value","en"],["value","es"],["value","inherit"],["value","plain"],["value","styled"],[3,"value",4,"ngFor","ngForOf"],[1,"form-actions"],["routerLink","/templates","title","Manage receipt templates",1,"btn","btn-secondary"],[3,"value"]],template:function(r,t){1&r&&(e.j41(0,"div",0)(1,"app-page-title",1),e.nI1(2,"translate"),e.nI1(3,"translate"),e.j41(4,"div",2)(5,"button",3),e.bIt("click",function(){return t.previewReceipt()}),e.EFF(6),e.nI1(7,"translate"),e.k0s(),e.DNE(8,b,3,3,"button",4),e.k0s()(),e.j41(9,"section",5)(10,"div",6)(11,"h3"),e.EFF(12),e.nI1(13,"translate"),e.k0s()(),e.j41(14,"div",7)(15,"div",8),e.bIt("click",function(){return t.setPrinterMode("plain")})("keydown.enter",function(){return t.setPrinterMode("plain")}),e.j41(16,"div",9)(17,"div",10),e.EFF(18,"T"),e.k0s()(),e.j41(19,"div",11)(20,"div",12),e.EFF(21),e.nI1(22,"translate"),e.k0s(),e.j41(23,"div",13),e.EFF(24),e.nI1(25,"translate"),e.k0s()(),e.j41(26,"div",14)(27,"span",15),e.EFF(28,"\u2713"),e.k0s()()(),e.j41(29,"div",8),e.bIt("click",function(){return t.setPrinterMode("styled")})("keydown.enter",function(){return t.setPrinterMode("styled")}),e.j41(30,"div",9)(31,"div",10),e.EFF(32,"S"),e.k0s()(),e.j41(33,"div",11)(34,"div",12),e.EFF(35),e.nI1(36,"translate"),e.k0s(),e.j41(37,"div",13),e.EFF(38),e.nI1(39,"translate"),e.k0s()(),e.j41(40,"div",14)(41,"span",15),e.EFF(42,"\u2713"),e.k0s()()()()(),e.j41(43,"section",16)(44,"h3"),e.EFF(45),e.nI1(46,"translate"),e.k0s(),e.j41(47,"div",17)(48,"label",18),e.EFF(49),e.nI1(50,"translate"),e.k0s(),e.j41(51,"input",19),e.nI1(52,"translate"),e.mxI("ngModelChange",function(o){return e.DH7(t.displayName,o)||(t.displayName=o),o}),e.k0s()(),e.j41(53,"div",17)(54,"label",18),e.EFF(55),e.nI1(56,"translate"),e.k0s(),e.j41(57,"select",20),e.mxI("ngModelChange",function(o){return e.DH7(t.preferredLang,o)||(t.preferredLang=o),o}),e.j41(58,"option",21),e.EFF(59),e.nI1(60,"translate"),e.k0s(),e.j41(61,"option",22),e.EFF(62),e.nI1(63,"translate"),e.k0s()()(),e.j41(64,"div",17)(65,"label",18),e.EFF(66),e.nI1(67,"translate"),e.k0s(),e.j41(68,"select",20),e.mxI("ngModelChange",function(o){return e.DH7(t.userPrinterMode,o)||(t.userPrinterMode=o),o}),e.j41(69,"option",23),e.EFF(70),e.nI1(71,"translate"),e.k0s(),e.j41(72,"option",24),e.EFF(73),e.nI1(74,"translate"),e.k0s(),e.j41(75,"option",25),e.EFF(76),e.nI1(77,"translate"),e.k0s()()(),e.j41(78,"div",17)(79,"label",18),e.EFF(80),e.nI1(81,"translate"),e.k0s(),e.j41(82,"select",20),e.mxI("ngModelChange",function(o){return e.DH7(t.selectedCurrency,o)||(t.selectedCurrency=o),o}),e.DNE(83,f,2,4,"option",26),e.k0s()(),e.j41(84,"div",27)(85,"button",3),e.bIt("click",function(){return t.saveUserSettings()}),e.EFF(86),e.nI1(87,"translate"),e.k0s()()()()),2&r&&(e.R7$(),e.Y8G("title",e.bMT(2,33,"SETTINGS.TITLE"))("description",e.bMT(3,35,"SETTINGS.DESCRIPTION")),e.R7$(5),e.SpI(" ",e.bMT(7,37,"SETTINGS.PRINTING.PREVIEW")," "),e.R7$(2),e.Y8G("ngIf",t.isAdmin),e.R7$(4),e.JRh(e.bMT(13,39,"SETTINGS.PRINTING.TITLE")),e.R7$(3),e.AVh("active","plain"===t.printerMode),e.BMQ("aria-checked","plain"===t.printerMode),e.R7$(6),e.JRh(e.bMT(22,41,"SETTINGS.PRINTING.PLAIN")),e.R7$(3),e.SpI(" ",e.bMT(25,43,"SETTINGS.PRINTING.PLAIN_DESC")," "),e.R7$(5),e.AVh("active","styled"===t.printerMode),e.BMQ("aria-checked","styled"===t.printerMode),e.R7$(6),e.JRh(e.bMT(36,45,"SETTINGS.PRINTING.STYLED")),e.R7$(3),e.SpI(" ",e.bMT(39,47,"SETTINGS.PRINTING.STYLED_DESC")," "),e.R7$(7),e.JRh(e.bMT(46,49,"SETTINGS.USER_PREFERENCES.TITLE")),e.R7$(4),e.JRh(e.bMT(50,51,"SETTINGS.USER_PREFERENCES.DISPLAY_NAME")),e.R7$(2),e.Y8G("placeholder",e.mNQ(e.bMT(52,53,"SETTINGS.USER_PREFERENCES.DISPLAY_NAME_PLACEHOLDER"))),e.R50("ngModel",t.displayName),e.R7$(4),e.JRh(e.bMT(56,55,"SETTINGS.USER_PREFERENCES.LANGUAGE")),e.R7$(2),e.R50("ngModel",t.preferredLang),e.R7$(2),e.JRh(e.bMT(60,57,"GLOBAL.ENGLISH")),e.R7$(3),e.JRh(e.bMT(63,59,"GLOBAL.SPANISH")),e.R7$(4),e.JRh(e.bMT(67,61,"SETTINGS.USER_PREFERENCES.PRINTER_MODE")),e.R7$(2),e.R50("ngModel",t.userPrinterMode),e.R7$(2),e.SpI(" ",e.bMT(71,63,"SETTINGS.USER_PREFERENCES.PRINTER_INHERIT")," "),e.R7$(3),e.SpI(" ",e.bMT(74,65,"SETTINGS.PRINTING.PLAIN")," "),e.R7$(3),e.SpI(" ",e.bMT(77,67,"SETTINGS.PRINTING.STYLED")," "),e.R7$(4),e.JRh(e.bMT(81,69,"SETTINGS.USER_PREFERENCES.CURRENCY")),e.R7$(2),e.R50("ngModel",t.selectedCurrency),e.R7$(),e.Y8G("ngForOf",t.currencyService.currencies),e.R7$(3),e.SpI(" ",e.bMT(87,71,"SETTINGS.USER_PREFERENCES.SAVE")," "))},dependencies:[g.MD,g.Sq,g.bT,c.YN,c.xH,c.y7,c.me,c.wz,c.BC,c.vS,M.j,u.Wk,P.D],styles:['@import"https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap";.dark-theme[_ngcontent-%COMP%]{--neumorphic-bg: #1a1d24;--neumorphic-surface: #222831;--text-primary: #e5e7eb;--text-secondary: #9ca3af;--text-muted: #6b7280;--bg-primary: #1a1d24;--bg-secondary: #222831;--bg-tertiary: #2d3139;--bg-hover: #3a3f4b;--bg-active: #4a5161;--border-color: #3a3f4b;--card-bg: #222831;--input-bg: #2d3139;--sidebar-text: rgba(255, 255, 255, .7);--sidebar-text-active: #ffffff;--shadow-neumorphic: 6px 6px 12px rgba(0, 0, 0, .4), -6px -6px 12px rgba(255, 255, 255, .02);--shadow-neumorphic-sm: 3px 3px 6px rgba(0, 0, 0, .3), -3px -3px 6px rgba(255, 255, 255, .02);--shadow-neumorphic-lg: 9px 9px 16px rgba(0, 0, 0, .5), -9px -9px 16px rgba(255, 255, 255, .03);--shadow-neumorphic-inset: inset 3px 3px 6px rgba(0, 0, 0, .3), inset -3px -3px 6px rgba(255, 255, 255, .02);background-color:var(--bg-primary);color:var(--text-primary)}.card[_ngcontent-%COMP%]{background:#fff;border-radius:24px;box-shadow:0 4px 24px #0000000f;border:1px solid rgba(0,0,0,.04);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);padding:.75rem 1rem}.setting-section[_ngcontent-%COMP%]{margin-top:1rem}.setting-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1rem;margin-bottom:.5rem;color:#2d1674}.setting-section[_ngcontent-%COMP%]   .setting-row[_ngcontent-%COMP%]{display:flex;align-items:center;padding:.5rem 0}.setting-section[_ngcontent-%COMP%]   .setting-row[_ngcontent-%COMP%]   .radio[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.6rem;cursor:pointer}.setting-section[_ngcontent-%COMP%]   .setting-row[_ngcontent-%COMP%]   .radio[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{width:18px;height:18px}.setting-section[_ngcontent-%COMP%]   .setting-row[_ngcontent-%COMP%]   .radio[_ngcontent-%COMP%]   .label-text[_ngcontent-%COMP%]{font-size:.95rem;color:#262626}.page-container[_ngcontent-%COMP%]{padding:2rem}.setting-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:1rem}.setting-header[_ngcontent-%COMP%]   .preview-btn[_ngcontent-%COMP%]{padding:.5rem 1rem;border-radius:9999px;border:1px solid transparent;font-size:.875rem;font-weight:500;cursor:pointer;transition:all .2s ease;display:inline-flex;align-items:center;justify-content:center;gap:.5rem;min-height:24px;box-shadow:none}.setting-header[_ngcontent-%COMP%]   .preview-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#0000000a}.setting-header[_ngcontent-%COMP%]   .preview-btn[_ngcontent-%COMP%]:active{transform:scale(.98)}.setting-header[_ngcontent-%COMP%]   .preview-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.setting-header[_ngcontent-%COMP%]   .preview-btn[_ngcontent-%COMP%]{background:#2d1674;color:#fff;box-shadow:none}.setting-header[_ngcontent-%COMP%]   .preview-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#1e0f52;transform:translateY(-1px)}.setting-header[_ngcontent-%COMP%]   .preview-btn[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}.setting-header[_ngcontent-%COMP%]   .preview-btn[_ngcontent-%COMP%]{padding:.35rem .75rem;font-size:.95rem;min-height:32px}.options[_ngcontent-%COMP%]{display:flex;gap:.75rem;margin-top:.75rem}.options[_ngcontent-%COMP%]   .option-card[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:.5rem .75rem;border:1px solid #d1d5db;border-radius:12px;background:transparent;cursor:pointer;min-width:220px;transition:box-shadow .12s,transform .08s}.options[_ngcontent-%COMP%]   .option-card[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:44px;height:44px;border-radius:8px;display:flex;align-items:center;justify-content:center;background:#fff;color:#2d1674;font-weight:700}.options[_ngcontent-%COMP%]   .option-card[_ngcontent-%COMP%]   .option-body[_ngcontent-%COMP%]{flex:1}.options[_ngcontent-%COMP%]   .option-card[_ngcontent-%COMP%]   .option-body[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:600;color:#262626}.options[_ngcontent-%COMP%]   .option-card[_ngcontent-%COMP%]   .option-body[_ngcontent-%COMP%]   .desc[_ngcontent-%COMP%]{font-size:.85rem;color:#595959}.options[_ngcontent-%COMP%]   .option-card[_ngcontent-%COMP%]   .option-right[_ngcontent-%COMP%]{width:26px;text-align:center}.options[_ngcontent-%COMP%]   .option-card[_ngcontent-%COMP%]   .option-right[_ngcontent-%COMP%]   .check[_ngcontent-%COMP%]{display:none;color:#2d1674;font-weight:700}.options[_ngcontent-%COMP%]   .option-card.active[_ngcontent-%COMP%]{border-color:#2d1674;box-shadow:0 2px 4px #0000000a;transform:translateY(-2px)}.options[_ngcontent-%COMP%]   .option-card.active[_ngcontent-%COMP%]   .option-right[_ngcontent-%COMP%]   .check[_ngcontent-%COMP%]{display:inline-block}.user-section[_ngcontent-%COMP%]{margin-top:1rem}.user-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:.75rem}.user-section[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;margin:.5rem 0}.user-section[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{width:160px;font-weight:600;color:#262626}.user-section[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .user-section[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{flex:1;width:100%;padding:.5rem 1rem;border:1px solid rgba(0,0,0,.08);border-radius:16px;font-size:.95rem;background:#fff;color:#262626;outline:none;transition:.2s ease;min-height:40px;box-shadow:0 2px 4px #00000005}.user-section[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder, .user-section[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.user-section[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .user-section[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 3px #2d16741a}.user-section[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{margin-top:.75rem;display:flex;justify-content:flex-end}.user-section[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:.45rem .9rem}']})}}return a})()}}]);