"use strict";(self.webpackChunkretail_pos=self.webpackChunkretail_pos||[]).push([[625],{119:(S,C,d)=>{d.d(C,{o:()=>_});var i=d(5547),h=d(497);let _=(()=>{class g{constructor(m){this.currencyService=m}transform(m,r=2){return null==m||isNaN(m)?`${this.currencyService.getSymbol()}0.00`:this.currencyService.format(m,r)}static{this.\u0275fac=function(r){return new(r||g)(i.rXU(h.P,16))}}static{this.\u0275pipe=i.EJ8({name:"appCurrency",type:g,pure:!1})}}return g})()},3081:(S,C,d)=>{d.d(C,{x:()=>g});var i=d(6175),h=d(5312),_=d(375);let g=(()=>{class b{constructor(r){this.http=r,this.apiUrl=`${h.c.apiUrl}/sales`}getSales(r){let c=new i.Nl;return r?.status&&(c=c.set("status",r.status)),r?.startDate&&(c=c.set("startDate",r.startDate)),r?.endDate&&(c=c.set("endDate",r.endDate)),r?.cashier&&(c=c.set("cashier",r.cashier)),r?.search&&(c=c.set("search",r.search)),r?.page&&(c=c.set("page",r.page.toString())),r?.pageSize&&(c=c.set("pageSize",r.pageSize.toString())),this.http.get(this.apiUrl,{params:c})}getSale(r){return this.http.get(`${this.apiUrl}/${r}`)}createSale(r){return this.http.post(this.apiUrl,r)}updateSale(r,c){return this.http.put(`${this.apiUrl}/${r}`,c)}cancelSale(r,c){return this.http.put(`${this.apiUrl}/${r}/cancel`,{cancellationReason:c})}refundSale(r,c,P,O){return this.http.post(`${this.apiUrl}/${r}/refund`,{refundType:c,reason:P,items:O})}getSalesSummary(r){let c=new i.Nl;return r?.startDate&&(c=c.set("startDate",r.startDate)),r?.endDate&&(c=c.set("endDate",r.endDate)),this.http.get(`${this.apiUrl}/reports/summary`,{params:c})}createInternalSale(r){return this.http.post(`${this.apiUrl}/internal`,r)}getInternalSalesStats(r){let c=new i.Nl;return r?.startDate&&(c=c.set("startDate",r.startDate)),r?.endDate&&(c=c.set("endDate",r.endDate)),this.http.get(`${this.apiUrl}/internal/stats`,{params:c})}static{this.\u0275fac=function(c){return new(c||b)(_.KVO(i.Qq))}}static{this.\u0275prov=_.jDH({token:b,factory:b.\u0275fac,providedIn:"root"})}}return b})()},6625:(S,C,d)=>{d.d(C,{SalesComponent:()=>X});var i=d(375),h=d(7017),_=d(9769),g=d(4341),b=d(1413),m=d(5245),r=d(6977),c=d(8659),P=d(7314),O=d(119),R=d(2005),e=d(5547),y=d(3081),T=d(4796),v=d(4078),x=d(2197),I=d(8397);const E=o=>({count:o}),F=o=>({saleNumber:o});function k(o,u){if(1&o){const t=e.RV6();e.j41(0,"tr")(1,"td")(2,"strong"),e.EFF(3),e.k0s()(),e.j41(4,"td"),e.EFF(5),e.nI1(6,"date"),e.k0s(),e.j41(7,"td"),e.EFF(8),e.nI1(9,"translate"),e.k0s(),e.j41(10,"td")(11,"strong"),e.EFF(12),e.nI1(13,"appCurrency"),e.k0s()(),e.j41(14,"td")(15,"span",36),e.EFF(16),e.nI1(17,"titlecase"),e.k0s()(),e.j41(18,"td"),e.EFF(19),e.k0s(),e.j41(20,"td")(21,"span",37),e.EFF(22),e.nI1(23,"titlecase"),e.k0s()(),e.j41(24,"td")(25,"div",38)(26,"button",39),e.nI1(27,"translate"),e.bIt("click",function(){const n=i.eBV(t).$implicit,s=e.XpG();return i.Njj(s.viewSale(n))}),e.nrm(28,"i",40),e.k0s(),e.j41(29,"button",41),e.nI1(30,"translate"),e.bIt("click",function(){const n=i.eBV(t).$implicit,s=e.XpG();return i.Njj(s.printReceipt(n))}),e.nrm(31,"i",42),e.k0s(),e.j41(32,"button",43),e.bIt("click",function(){const n=i.eBV(t).$implicit,s=e.XpG();return i.Njj(s.openRefundModal(n))}),e.nrm(33,"i",44),e.k0s(),e.j41(34,"button",45),e.nI1(35,"translate"),e.bIt("click",function(){const n=i.eBV(t).$implicit,s=e.XpG();return i.Njj(s.cancelSale(n._id))}),e.nrm(36,"i",46),e.k0s()()()()}if(2&o){const t=u.$implicit,a=e.XpG();e.R7$(3),e.JRh(t.saleNumber),e.R7$(2),e.JRh(e.i5U(6,19,t.createdAt,"short")),e.R7$(3),e.SpI(" ",e.i5U(9,22,"SALES.ITEMS_COUNT",e.eq3(37,E,a.getTotalItems(t)))," "),e.R7$(4),e.JRh(e.bMT(13,25,t.total)),e.R7$(3),e.HbH("payment-"+t.paymentMethod),e.R7$(),e.SpI(" ",e.bMT(17,27,t.paymentMethod)," "),e.R7$(3),e.JRh(a.getCashierName(t.cashier)),e.R7$(2),e.HbH("status-"+t.status),e.R7$(),e.SpI(" ",e.bMT(23,29,t.status)," "),e.R7$(4),e.Y8G("title",e.mNQ(e.bMT(27,31,"SALES.ACTIONS.VIEW"))),e.R7$(3),e.Y8G("title",e.mNQ(e.bMT(30,33,"SALES.ACTIONS.PRINT"))),e.R7$(3),e.Y8G("disabled",!a.isAdmin()||"completed"!==t.status&&"in_progress"!==t.status),e.R7$(2),e.Y8G("title",e.mNQ(e.bMT(35,35,"SALES.ACTIONS.CANCEL")))("disabled",!a.isAdmin()||"completed"!==t.status)}}function j(o,u){1&o&&(e.j41(0,"tr")(1,"td",47),e.EFF(2),e.nI1(3,"translate"),e.k0s()()),2&o&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"SALES.EMPTY")," "))}function A(o,u){if(1&o){const t=e.RV6();e.j41(0,"button",54),e.bIt("click",function(){const n=i.eBV(t).$implicit,s=e.XpG(2);return i.Njj(n>0&&s.goToPage(n))}),e.EFF(1),e.k0s()}if(2&o){const t=u.$implicit,a=e.XpG(2);e.AVh("active",a.currentPage()===t)("ellipsis",-1===t),e.Y8G("disabled",-1===t),e.R7$(),e.SpI(" ",-1===t?"...":t," ")}}function D(o,u){if(1&o){const t=e.RV6();e.j41(0,"div",48)(1,"button",49),e.bIt("click",function(){i.eBV(t);const n=e.XpG();return i.Njj(n.prevPage())}),e.nrm(2,"i",50),e.EFF(3),e.nI1(4,"translate"),e.k0s(),e.j41(5,"div",51),e.DNE(6,A,2,6,"button",52),e.k0s(),e.j41(7,"button",49),e.bIt("click",function(){i.eBV(t);const n=e.XpG();return i.Njj(n.nextPage())}),e.EFF(8),e.nI1(9,"translate"),e.nrm(10,"i",53),e.k0s()()}if(2&o){const t=e.XpG();e.R7$(),e.Y8G("disabled",1===t.currentPage()),e.R7$(2),e.SpI(" ",e.bMT(4,5,"GLOBAL.PREVIOUS")," "),e.R7$(3),e.Y8G("ngForOf",t.getVisiblePages()),e.R7$(),e.Y8G("disabled",t.currentPage()===t.totalPages()),e.R7$(),e.SpI(" ",e.bMT(9,7,"GLOBAL.NEXT")," ")}}function $(o,u){if(1&o&&(e.j41(0,"div",56)(1,"span",57),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"span"),e.EFF(5),e.k0s()()),2&o){const t=e.XpG(2);e.R7$(2),e.JRh(e.bMT(3,2,"SALES.DETAILS.NOTES")),e.R7$(3),e.JRh(t.selectedSale.notes)}}function L(o,u){if(1&o&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.nI1(7,"appCurrency"),e.k0s(),e.j41(8,"td"),e.EFF(9),e.nI1(10,"appCurrency"),e.k0s(),e.j41(11,"td")(12,"strong"),e.EFF(13),e.nI1(14,"appCurrency"),e.k0s()()()),2&o){const t=u.$implicit,a=e.XpG(2);e.R7$(2),e.JRh(t.productName||a.getProductName(t.product)),e.R7$(2),e.JRh(t.quantity),e.R7$(2),e.SpI(" ",e.bMT(7,5,t.unitPrice)," "),e.R7$(3),e.SpI(" ",e.bMT(10,7,t.discountAmount||0)," "),e.R7$(4),e.JRh(e.bMT(14,9,t.total))}}function w(o,u){if(1&o&&(e.j41(0,"div",62)(1,"span"),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"span"),e.EFF(5),e.nI1(6,"appCurrency"),e.k0s()()),2&o){const t=e.XpG(2);e.R7$(2),e.JRh(e.bMT(3,2,"SALES.DETAILS.TOTALS.DISCOUNT")),e.R7$(3),e.SpI("-",e.bMT(6,4,t.selectedSale.discountTotal))}}function N(o,u){if(1&o&&(e.j41(0,"div",62)(1,"span"),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"span"),e.EFF(5),e.nI1(6,"appCurrency"),e.k0s()()),2&o){const t=e.XpG(2);e.R7$(2),e.JRh(e.bMT(3,2,"SALES.DETAILS.TOTALS.TAX")),e.R7$(3),e.JRh(e.bMT(6,4,t.selectedSale.taxTotal))}}function U(o,u){if(1&o&&(e.j41(0,"div")(1,"div",55)(2,"div",56)(3,"span",57),e.EFF(4),e.nI1(5,"translate"),e.k0s(),e.j41(6,"span"),e.EFF(7),e.nI1(8,"date"),e.k0s()(),e.j41(9,"div",56)(10,"span",57),e.EFF(11),e.nI1(12,"translate"),e.k0s(),e.j41(13,"span"),e.EFF(14),e.k0s()(),e.j41(15,"div",56)(16,"span",57),e.EFF(17),e.nI1(18,"translate"),e.k0s(),e.j41(19,"span",36),e.EFF(20),e.nI1(21,"titlecase"),e.k0s()(),e.j41(22,"div",56)(23,"span",57),e.EFF(24),e.nI1(25,"translate"),e.k0s(),e.j41(26,"span",37),e.EFF(27),e.nI1(28,"titlecase"),e.k0s()(),e.DNE(29,$,6,4,"div",58),e.k0s(),e.j41(30,"h3"),e.EFF(31),e.nI1(32,"translate"),e.k0s(),e.j41(33,"div",59)(34,"table",60)(35,"thead")(36,"tr")(37,"th"),e.EFF(38),e.nI1(39,"translate"),e.k0s(),e.j41(40,"th"),e.EFF(41),e.nI1(42,"translate"),e.k0s(),e.j41(43,"th"),e.EFF(44),e.nI1(45,"translate"),e.k0s(),e.j41(46,"th"),e.EFF(47),e.nI1(48,"translate"),e.k0s(),e.j41(49,"th"),e.EFF(50),e.nI1(51,"translate"),e.k0s()()(),e.j41(52,"tbody"),e.DNE(53,L,15,11,"tr",28),e.k0s()()(),e.j41(54,"div",61)(55,"div",62)(56,"span"),e.EFF(57),e.nI1(58,"translate"),e.k0s(),e.j41(59,"span"),e.EFF(60),e.nI1(61,"appCurrency"),e.k0s()(),e.DNE(62,w,7,6,"div",63)(63,N,7,6,"div",63),e.j41(64,"div",64)(65,"span")(66,"strong"),e.EFF(67),e.nI1(68,"translate"),e.k0s()(),e.j41(69,"span")(70,"strong"),e.EFF(71),e.nI1(72,"appCurrency"),e.k0s()()()()()),2&o){const t=e.XpG();e.R7$(4),e.JRh(e.bMT(5,26,"SALES.DETAILS.DATE")),e.R7$(3),e.JRh(e.i5U(8,28,t.selectedSale.createdAt,"medium")),e.R7$(4),e.JRh(e.bMT(12,31,"SALES.DETAILS.CASHIER")),e.R7$(3),e.JRh(t.getCashierName(t.selectedSale.cashier)),e.R7$(3),e.JRh(e.bMT(18,33,"SALES.DETAILS.PAYMENT_METHOD")),e.R7$(2),e.HbH("payment-"+t.selectedSale.paymentMethod),e.R7$(),e.SpI(" ",e.bMT(21,35,t.selectedSale.paymentMethod)," "),e.R7$(4),e.JRh(e.bMT(25,37,"SALES.DETAILS.STATUS")),e.R7$(2),e.HbH("status-"+t.selectedSale.status),e.R7$(),e.SpI(" ",e.bMT(28,39,t.selectedSale.status)," "),e.R7$(2),e.Y8G("ngIf",t.selectedSale.notes),e.R7$(2),e.JRh(e.bMT(32,41,"SALES.DETAILS.ITEMS")),e.R7$(7),e.JRh(e.bMT(39,43,"SALES.DETAILS.TABLE.PRODUCT")),e.R7$(3),e.JRh(e.bMT(42,45,"SALES.DETAILS.TABLE.QTY")),e.R7$(3),e.JRh(e.bMT(45,47,"SALES.DETAILS.TABLE.UNIT_PRICE")),e.R7$(3),e.JRh(e.bMT(48,49,"SALES.DETAILS.TABLE.DISCOUNT")),e.R7$(3),e.JRh(e.bMT(51,51,"SALES.DETAILS.TABLE.TOTAL")),e.R7$(3),e.Y8G("ngForOf",t.selectedSale.items),e.R7$(4),e.JRh(e.bMT(58,53,"SALES.DETAILS.TOTALS.SUBTOTAL")),e.R7$(3),e.JRh(e.bMT(61,55,t.selectedSale.subtotal)),e.R7$(2),e.Y8G("ngIf",t.selectedSale.discountTotal),e.R7$(),e.Y8G("ngIf",t.selectedSale.taxTotal),e.R7$(4),e.JRh(e.bMT(68,57,"SALES.DETAILS.TOTALS.TOTAL")),e.R7$(4),e.JRh(e.bMT(72,59,t.selectedSale.total))}}function G(o,u){if(1&o&&(e.j41(0,"strong"),e.EFF(1),e.nI1(2,"appCurrency"),e.k0s()),2&o){const t=e.XpG(),a=t.$implicit,n=t.index,s=e.XpG(3);e.R7$(),e.JRh(e.bMT(2,1,a.unitPrice*s.refundItems[n].quantity-(a.discountAmount||0)*(s.refundItems[n].quantity/a.quantity)))}}function B(o,u){1&o&&(e.j41(0,"span"),e.EFF(1,"-"),e.k0s())}function z(o,u){if(1&o){const t=e.RV6();e.j41(0,"tr")(1,"td")(2,"input",74),e.mxI("ngModelChange",function(n){const s=i.eBV(t).index,l=e.XpG(3);return e.DH7(l.refundItems[s].selected,n)||(l.refundItems[s].selected=n),i.Njj(n)}),e.bIt("change",function(){i.eBV(t);const n=e.XpG(3);return i.Njj(n.updateRefundTotal())}),e.k0s()(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.nI1(7,"appCurrency"),e.k0s(),e.j41(8,"td"),e.EFF(9),e.k0s(),e.j41(10,"td")(11,"input",75),e.mxI("ngModelChange",function(n){const s=i.eBV(t).index,l=e.XpG(3);return e.DH7(l.refundItems[s].quantity,n)||(l.refundItems[s].quantity=n),i.Njj(n)}),e.bIt("change",function(){i.eBV(t);const n=e.XpG(3);return i.Njj(n.updateRefundTotal())}),e.k0s()(),e.j41(12,"td"),e.DNE(13,G,3,3,"strong",29)(14,B,2,0,"span",29),e.k0s()()}if(2&o){const t=u.$implicit,a=u.index,n=e.XpG(3);e.R7$(2),e.R50("ngModel",n.refundItems[a].selected),e.R7$(2),e.JRh(t.productName||n.getProductName(t.product)),e.R7$(2),e.JRh(e.bMT(7,10,t.unitPrice)),e.R7$(3),e.JRh(t.quantity),e.R7$(2),e.R50("ngModel",n.refundItems[a].quantity),e.Y8G("max",t.quantity)("min",1)("disabled",!n.refundItems[a].selected),e.R7$(2),e.Y8G("ngIf",n.refundItems[a].selected),e.R7$(),e.Y8G("ngIf",!n.refundItems[a].selected)}}function J(o,u){if(1&o&&(e.j41(0,"div",72)(1,"h3"),e.EFF(2,"Select Items to Refund"),e.k0s(),e.j41(3,"div",59)(4,"table",60)(5,"thead")(6,"tr")(7,"th"),e.EFF(8,"Select"),e.k0s(),e.j41(9,"th"),e.EFF(10,"Product"),e.k0s(),e.j41(11,"th"),e.EFF(12,"Unit Price"),e.k0s(),e.j41(13,"th"),e.EFF(14,"Qty Sold"),e.k0s(),e.j41(15,"th"),e.EFF(16,"Qty to Refund"),e.k0s(),e.j41(17,"th"),e.EFF(18,"Total"),e.k0s()()(),e.j41(19,"tbody"),e.DNE(20,z,15,12,"tr",28),e.k0s()()(),e.j41(21,"div",73)(22,"strong"),e.EFF(23),e.nI1(24,"appCurrency"),e.k0s()()()),2&o){const t=e.XpG(2);e.R7$(20),e.Y8G("ngForOf",t.selectedSaleForRefund.items),e.R7$(3),e.SpI("Refund Total: ",e.bMT(24,2,t.refundTotal))}}function Y(o,u){if(1&o){const t=e.RV6();e.j41(0,"div")(1,"div",65)(2,"label")(3,"input",66),e.mxI("ngModelChange",function(n){i.eBV(t);const s=e.XpG();return e.DH7(s.refundType,n)||(s.refundType=n),i.Njj(n)}),e.bIt("change",function(){i.eBV(t);const n=e.XpG();return i.Njj(n.onRefundTypeChange())}),e.k0s(),e.EFF(4),e.nI1(5,"appCurrency"),e.k0s(),e.j41(6,"label")(7,"input",67),e.mxI("ngModelChange",function(n){i.eBV(t);const s=e.XpG();return e.DH7(s.refundType,n)||(s.refundType=n),i.Njj(n)}),e.bIt("change",function(){i.eBV(t);const n=e.XpG();return i.Njj(n.onRefundTypeChange())}),e.k0s(),e.EFF(8," Partial Refund "),e.k0s()(),e.DNE(9,J,25,4,"div",68),e.j41(10,"div",69)(11,"label",70),e.EFF(12,"Reason for Refund *"),e.k0s(),e.j41(13,"textarea",71),e.mxI("ngModelChange",function(n){i.eBV(t);const s=e.XpG();return e.DH7(s.refundReason,n)||(s.refundReason=n),i.Njj(n)}),e.k0s()()()}if(2&o){const t=e.XpG();e.R7$(3),e.R50("ngModel",t.refundType),e.R7$(),e.SpI(" Full Refund (",e.bMT(5,5,t.selectedSaleForRefund.total),") "),e.R7$(3),e.R50("ngModel",t.refundType),e.R7$(2),e.Y8G("ngIf","partial"===t.refundType),e.R7$(4),e.R50("ngModel",t.refundReason)}}let X=(()=>{class o{constructor(t,a,n,s,l){this.saleService=t,this.authService=a,this.searchStateService=n,this.receiptGeneratorService=s,this.toastService=l,this.currentUser=null,this.sales=(0,i.vPA)([]),this.searchQuery=(0,i.vPA)(""),this.filteredSales=(0,h.EW)(()=>{const p=this.searchQuery().toLowerCase().trim(),f=this.sales();return p?f.filter(M=>M.saleNumber?.toLowerCase().includes(p)||this.getCashierName(M.cashier).toLowerCase().includes(p)||M.paymentMethod?.toLowerCase().includes(p)||M.status?.toLowerCase().includes(p)):f}),this.showSaleModal=!1,this.selectedSale=null,this.showRefundModal=!1,this.selectedSaleForRefund=null,this.refundType="full",this.refundReason="",this.refundItems=[],this.refundTotal=0,this.currentPage=(0,i.vPA)(1),this.pageSize=(0,i.vPA)(10),this.paginatedSales=(0,h.EW)(()=>{const p=this.filteredSales(),f=(this.currentPage()-1)*this.pageSize(),M=f+this.pageSize();return p.slice(f,M)}),this.totalPages=(0,h.EW)(()=>Math.ceil(this.filteredSales().length/this.pageSize())),this.filters={status:"",startDate:"",endDate:""},this.summary={totalSales:0,totalRevenue:0,averageSale:0,totalItems:0},this.destroy$=new b.B}ngOnInit(){this.currentUser=this.authService.getCurrentUser(),this.searchStateService.clearSearch(),this.loadSales(),this.searchStateService.searchQuery$.pipe((0,m.i)(1),(0,r.Q)(this.destroy$)).subscribe(t=>{this.searchQuery.set(t)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.searchStateService.clearSearch()}isAdmin(){return"admin"===this.currentUser?.role}loadSales(){const t={};this.filters.status&&(t.status=this.filters.status),this.filters.startDate&&(t.startDate=this.filters.startDate),this.filters.endDate&&(t.endDate=this.filters.endDate),this.saleService.getSales(t).subscribe({next:a=>{this.sales.set(a.data),this.calculateSummary()},error:a=>console.error("Error loading sales:",a)})}calculateSummary(){const t=this.filteredSales();this.summary.totalSales=t.length,this.summary.totalRevenue=t.reduce((a,n)=>a+(n.total||0),0),this.summary.averageSale=this.summary.totalSales>0?this.summary.totalRevenue/this.summary.totalSales:0,this.summary.totalItems=t.reduce((a,n)=>a+this.getTotalItems(n),0)}getTotalItems(t){return t.items.reduce((a,n)=>a+(n.quantity||0),0)}getCashierName(t){return"string"==typeof t?t:t.firstName&&t.lastName?`${t.firstName} ${t.lastName}`:t.username||"Unknown"}getProductName(t){return"string"==typeof t?t:t?.name||"Unknown Product"}viewSale(t){this.selectedSale=t,this.showSaleModal=!0}printReceipt(t){const a=this.currentUser||this.authService.getCurrentUser(),n=t.paymentMethod||"cash",s=t.paymentDetails?.change??0;"styled"===(localStorage.getItem("printer.mode")||"plain")?this.receiptGeneratorService.generateReceipt(t,n,s,a).subscribe({next:p=>{this.receiptGeneratorService.printReceipt(p,"html")},error:p=>{console.error("Error generating styled receipt for sale:",p),this.toastService.show("Failed to generate receipt. See console for details.","error")}}):this.receiptGeneratorService.generatePlainTextReceipt(t,n,s,a).subscribe({next:p=>{this.receiptGeneratorService.printReceipt(p,"plain")},error:p=>{console.error("Error generating plain-text receipt for sale:",p),this.toastService.show("Failed to generate receipt. See console for details.","error")}})}nextPage(){this.currentPage()<this.totalPages()&&this.currentPage.set(this.currentPage()+1)}prevPage(){this.currentPage()>1&&this.currentPage.set(this.currentPage()-1)}goToPage(t){t>=1&&t<=this.totalPages()&&this.currentPage.set(t)}changePageSize(t){this.pageSize.set(t),this.currentPage.set(1)}getVisiblePages(){const t=this.currentPage(),a=this.totalPages(),s=[];if(a<=7)for(let l=1;l<=a;l++)s.push(l);else{s.push(1),t>4&&s.push(-1);const l=Math.max(2,t-2),p=Math.min(a-1,t+2);for(let f=l;f<=p;f++)s.push(f);t<a-2-1&&s.push(-1),s.push(a)}return s}cancelSale(t){if(!this.isAdmin())return void this.toastService.show("Only administrators can cancel sales","error");const a=prompt("Enter cancellation reason:");a&&this.saleService.cancelSale(t,a).subscribe({next:n=>{const s=this.sales().findIndex(l=>l._id===n._id);if(-1!==s){const l=[...this.sales()];l[s]=n,this.sales.set(l),this.calculateSummary()}this.toastService.show("Sale cancelled successfully","success")},error:n=>{console.error("Error cancelling sale:",n),this.toastService.show("Failed to cancel sale","error")}})}openRefundModal(t){this.isAdmin()?(this.selectedSaleForRefund=t,this.refundType="full",this.refundReason="",this.refundItems=t.items.map(a=>({itemId:a._id||"",quantity:a.quantity,selected:!1})),this.refundTotal=0,this.showRefundModal=!0):this.toastService.show("Only administrators can refund sales","error")}onRefundTypeChange(){"full"===this.refundType&&(this.refundItems.forEach(t=>{t.selected=!1}),this.refundTotal=0)}updateRefundTotal(){this.refundTotal=this.selectedSaleForRefund?this.selectedSaleForRefund.items.reduce((t,a,n)=>{if(this.refundItems[n].selected){const s=this.refundItems[n].quantity;return t+a.unitPrice*s-(a.discountAmount||0)*(s/a.quantity)}return t},0):0}hasSelectedItems(){return this.refundItems.some(t=>t.selected)}processRefund(){if(!this.selectedSaleForRefund||!this.refundReason)return void this.toastService.show("Please provide a reason for the refund","info");if("partial"===this.refundType&&!this.hasSelectedItems())return void this.toastService.show("Please select at least one item to refund","info");const t="partial"===this.refundType?this.refundItems.filter(a=>a.selected).map(a=>({itemId:a.itemId,quantity:a.quantity})):void 0;this.saleService.refundSale(this.selectedSaleForRefund._id,this.refundType,this.refundReason,t).subscribe({next:a=>{const n=this.sales().findIndex(s=>s._id===a._id);if(-1!==n){const s=[...this.sales()];s[n]=a,this.sales.set(s),this.calculateSummary()}this.showRefundModal=!1,this.toastService.show(("full"===this.refundType?"Full":"Partial")+" refund processed successfully","success")},error:a=>{console.error("Error processing refund:",a),this.toastService.show(a.error?.message||"Failed to process refund","error")}})}static{this.\u0275fac=function(a){return new(a||o)(e.rXU(y.x),e.rXU(T.u),e.rXU(v.$),e.rXU(x.n),e.rXU(I.f))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-sales"]],decls:121,vars:83,consts:[["icon","fa-receipt",3,"title","description"],[1,"header-actions"],[1,"filter-group"],["for","status"],["id","status",3,"ngModelChange","change","ngModel"],["value",""],["value","completed"],["value","cancelled"],["value","refunded"],["for","startDate"],["type","date","id","startDate",3,"ngModelChange","change","ngModel"],["for","endDate"],["type","date","id","endDate",3,"ngModelChange","change","ngModel"],[1,"row-count"],[1,"page-size-select",3,"ngModelChange","change","ngModel"],[3,"value"],[1,"sales-container"],[1,"summary-cards"],[1,"summary-card"],[1,"card-icon"],[1,"fas","fa-shopping-cart"],[1,"card-content"],[1,"card-value"],[1,"fas","fa-money-bill-wave"],[1,"fas","fa-chart-line"],[1,"fas","fa-box"],[1,"sales-table-wrapper","neumorphic-table","table-responsive"],[1,"sales-table"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","pagination",4,"ngIf"],["size","lg",3,"close","show","title"],["size","md",3,"close","show","title","closeOnBackdropClick"],["modal-footer","",1,"modal-footer"],[1,"btn-secondary",3,"click"],[1,"btn-primary",3,"click","disabled"],[1,"payment-badge"],[1,"status-badge"],[1,"action-buttons"],[1,"btn-view",3,"click","title"],[1,"fas","fa-eye"],[1,"btn-print",3,"click","title"],[1,"fas","fa-print"],["title","Refund",1,"btn-refund",3,"click","disabled"],[1,"fas","fa-undo"],[1,"btn-cancel",3,"click","disabled","title"],[1,"fas","fa-ban"],["colspan","8",1,"empty-state"],[1,"pagination"],[1,"pagination-btn",3,"click","disabled"],[1,"fas","fa-chevron-left"],[1,"pagination-pages"],["class","pagination-page",3,"active","ellipsis","disabled","click",4,"ngFor","ngForOf"],[1,"fas","fa-chevron-right"],[1,"pagination-page",3,"click","disabled"],[1,"sale-info"],[1,"info-row"],[1,"info-label"],["class","info-row",4,"ngIf"],[1,"neumorphic-table","table-responsive"],[1,"items-table"],[1,"sale-totals"],[1,"total-row"],["class","total-row",4,"ngIf"],[1,"total-row","grand-total"],[1,"refund-type-selector"],["type","radio","name","refundType","value","full",3,"ngModelChange","change","ngModel"],["type","radio","name","refundType","value","partial",3,"ngModelChange","change","ngModel"],["class","refund-items",4,"ngIf"],[1,"form-group"],["for","refundReason"],["id","refundReason","placeholder","Enter reason for refund...","rows","3","required","",3,"ngModelChange","ngModel"],[1,"refund-items"],[1,"refund-summary"],["type","checkbox",3,"ngModelChange","change","ngModel"],["type","number",1,"qty-input",3,"ngModelChange","change","ngModel","max","min","disabled"]],template:function(a,n){1&a&&(e.j41(0,"app-page-title",0),e.nI1(1,"translate"),e.nI1(2,"translate"),e.j41(3,"div",1)(4,"div",2)(5,"label",3),e.EFF(6,"Status:"),e.k0s(),e.j41(7,"select",4),e.mxI("ngModelChange",function(l){return e.DH7(n.filters.status,l)||(n.filters.status=l),l}),e.bIt("change",function(){return n.loadSales()}),e.j41(8,"option",5),e.EFF(9,"All"),e.k0s(),e.j41(10,"option",6),e.EFF(11,"Completed"),e.k0s(),e.j41(12,"option",7),e.EFF(13,"Cancelled"),e.k0s(),e.j41(14,"option",8),e.EFF(15,"Refunded"),e.k0s()()(),e.j41(16,"div",2)(17,"label",9),e.EFF(18,"From:"),e.k0s(),e.j41(19,"input",10),e.mxI("ngModelChange",function(l){return e.DH7(n.filters.startDate,l)||(n.filters.startDate=l),l}),e.bIt("change",function(){return n.loadSales()}),e.k0s()(),e.j41(20,"div",2)(21,"label",11),e.EFF(22,"To:"),e.k0s(),e.j41(23,"input",12),e.mxI("ngModelChange",function(l){return e.DH7(n.filters.endDate,l)||(n.filters.endDate=l),l}),e.bIt("change",function(){return n.loadSales()}),e.k0s()(),e.j41(24,"div",13)(25,"span"),e.EFF(26),e.nI1(27,"translate"),e.k0s(),e.j41(28,"select",14),e.mxI("ngModelChange",function(l){return e.DH7(n.pageSize,l)||(n.pageSize=l),l}),e.bIt("change",function(l){return n.changePageSize(+l.target.value)}),e.j41(29,"option",15),e.EFF(30,"5 per page"),e.k0s(),e.j41(31,"option",15),e.EFF(32,"10 per page"),e.k0s(),e.j41(33,"option",15),e.EFF(34,"25 per page"),e.k0s(),e.j41(35,"option",15),e.EFF(36,"50 per page"),e.k0s(),e.j41(37,"option",15),e.EFF(38,"100 per page"),e.k0s()()()()(),e.j41(39,"div",16)(40,"div",17)(41,"div",18)(42,"div",19),e.nrm(43,"i",20),e.k0s(),e.j41(44,"div",21)(45,"h3"),e.EFF(46),e.nI1(47,"translate"),e.k0s(),e.j41(48,"p",22),e.EFF(49),e.k0s()()(),e.j41(50,"div",18)(51,"div",19),e.nrm(52,"i",23),e.k0s(),e.j41(53,"div",21)(54,"h3"),e.EFF(55),e.nI1(56,"translate"),e.k0s(),e.j41(57,"p",22),e.EFF(58),e.nI1(59,"appCurrency"),e.k0s()()(),e.j41(60,"div",18)(61,"div",19),e.nrm(62,"i",24),e.k0s(),e.j41(63,"div",21)(64,"h3"),e.EFF(65),e.nI1(66,"translate"),e.k0s(),e.j41(67,"p",22),e.EFF(68),e.nI1(69,"appCurrency"),e.k0s()()(),e.j41(70,"div",18)(71,"div",19),e.nrm(72,"i",25),e.k0s(),e.j41(73,"div",21)(74,"h3"),e.EFF(75),e.nI1(76,"translate"),e.k0s(),e.j41(77,"p",22),e.EFF(78),e.k0s()()()(),e.j41(79,"div",26)(80,"table",27)(81,"thead")(82,"tr")(83,"th"),e.EFF(84),e.nI1(85,"translate"),e.k0s(),e.j41(86,"th"),e.EFF(87),e.nI1(88,"translate"),e.k0s(),e.j41(89,"th"),e.EFF(90),e.nI1(91,"translate"),e.k0s(),e.j41(92,"th"),e.EFF(93),e.nI1(94,"translate"),e.k0s(),e.j41(95,"th"),e.EFF(96),e.nI1(97,"translate"),e.k0s(),e.j41(98,"th"),e.EFF(99),e.nI1(100,"translate"),e.k0s(),e.j41(101,"th"),e.EFF(102),e.nI1(103,"translate"),e.k0s(),e.j41(104,"th"),e.EFF(105),e.nI1(106,"translate"),e.k0s()()(),e.j41(107,"tbody"),e.DNE(108,k,37,39,"tr",28)(109,j,4,3,"tr",29),e.k0s()(),e.DNE(110,D,11,9,"div",30),e.k0s(),e.j41(111,"app-modal",31),e.nI1(112,"translate"),e.bIt("close",function(){return n.showSaleModal=!1}),e.DNE(113,U,73,61,"div",29),e.k0s(),e.j41(114,"app-modal",32),e.bIt("close",function(){return n.showRefundModal=!1}),e.DNE(115,Y,14,7,"div",29),e.j41(116,"div",33)(117,"button",34),e.bIt("click",function(){return n.showRefundModal=!1}),e.EFF(118," Cancel "),e.k0s(),e.j41(119,"button",35),e.bIt("click",function(){return n.processRefund()}),e.EFF(120," Process Refund "),e.k0s()()()()),2&a&&(e.Y8G("title",e.mNQ(e.bMT(1,41,"SALES.TITLE")))("description",e.mNQ(e.bMT(2,43,"SALES.DESCRIPTION"))),e.R7$(7),e.R50("ngModel",n.filters.status),e.R7$(12),e.R50("ngModel",n.filters.startDate),e.R7$(4),e.R50("ngModel",n.filters.endDate),e.R7$(3),e.JRh(e.i5U(27,45,"SALES.TOTAL",e.eq3(79,E,n.filteredSales().length))),e.R7$(2),e.R50("ngModel",n.pageSize),e.R7$(),e.Y8G("value",5),e.R7$(2),e.Y8G("value",10),e.R7$(2),e.Y8G("value",25),e.R7$(2),e.Y8G("value",50),e.R7$(2),e.Y8G("value",100),e.R7$(9),e.JRh(e.bMT(47,48,"SALES.SUMMARY.TOTAL_SALES")),e.R7$(3),e.JRh(n.summary.totalSales||0),e.R7$(6),e.JRh(e.bMT(56,50,"SALES.SUMMARY.REVENUE")),e.R7$(3),e.SpI(" ",e.bMT(59,52,n.summary.totalRevenue||0)," "),e.R7$(7),e.JRh(e.bMT(66,54,"SALES.SUMMARY.AVERAGE_SALE")),e.R7$(3),e.SpI(" ",e.bMT(69,56,n.summary.averageSale||0)," "),e.R7$(7),e.JRh(e.bMT(76,58,"SALES.SUMMARY.ITEMS_SOLD")),e.R7$(3),e.JRh(n.summary.totalItems||0),e.R7$(6),e.JRh(e.bMT(85,60,"SALES.TABLE.SALE_ID")),e.R7$(3),e.JRh(e.bMT(88,62,"SALES.TABLE.DATE")),e.R7$(3),e.JRh(e.bMT(91,64,"SALES.TABLE.ITEMS")),e.R7$(3),e.JRh(e.bMT(94,66,"SALES.TABLE.TOTAL")),e.R7$(3),e.JRh(e.bMT(97,68,"SALES.TABLE.PAYMENT")),e.R7$(3),e.JRh(e.bMT(100,70,"SALES.TABLE.CASHIER")),e.R7$(3),e.JRh(e.bMT(103,72,"SALES.TABLE.STATUS")),e.R7$(3),e.JRh(e.bMT(106,74,"SALES.TABLE.ACTIONS")),e.R7$(3),e.Y8G("ngForOf",n.paginatedSales()),e.R7$(),e.Y8G("ngIf",0===n.filteredSales().length),e.R7$(),e.Y8G("ngIf",n.filteredSales().length>0),e.R7$(),e.Y8G("show",n.showSaleModal&&!!n.selectedSale)("title",e.i5U(112,76,"SALES.DETAILS_TITLE",e.eq3(81,F,null==n.selectedSale?null:n.selectedSale.saleNumber))),e.R7$(2),e.Y8G("ngIf",n.selectedSale),e.R7$(),e.Y8G("show",n.showRefundModal&&!!n.selectedSaleForRefund)("title","Refund Sale "+((null==n.selectedSaleForRefund?null:n.selectedSaleForRefund.saleNumber)||""))("closeOnBackdropClick",!1),e.R7$(),e.Y8G("ngIf",n.selectedSaleForRefund),e.R7$(4),e.Y8G("disabled",!n.refundReason||"partial"===n.refundType&&!n.hasSelectedItems()))},dependencies:[_.MD,_.Sq,_.bT,g.YN,g.xH,g.y7,g.me,g.Q0,g.Zm,g.wz,g.Fm,g.BC,g.YS,g.VZ,g.zX,g.vS,c.j,R.z,_.PV,_.vh,P.D,O.o],styles:['@import"https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap";.dark-theme[_ngcontent-%COMP%]{--neumorphic-bg: #1a1d24;--neumorphic-surface: #222831;--text-primary: #e5e7eb;--text-secondary: #9ca3af;--text-muted: #6b7280;--bg-primary: #1a1d24;--bg-secondary: #222831;--bg-tertiary: #2d3139;--bg-hover: #3a3f4b;--bg-active: #4a5161;--border-color: #3a3f4b;--card-bg: #222831;--input-bg: #2d3139;--sidebar-text: rgba(255, 255, 255, .7);--sidebar-text-active: #ffffff;--shadow-neumorphic: 6px 6px 12px rgba(0, 0, 0, .4), -6px -6px 12px rgba(255, 255, 255, .02);--shadow-neumorphic-sm: 3px 3px 6px rgba(0, 0, 0, .3), -3px -3px 6px rgba(255, 255, 255, .02);--shadow-neumorphic-lg: 9px 9px 16px rgba(0, 0, 0, .5), -9px -9px 16px rgba(255, 255, 255, .03);--shadow-neumorphic-inset: inset 3px 3px 6px rgba(0, 0, 0, .3), inset -3px -3px 6px rgba(255, 255, 255, .02);background-color:var(--bg-primary);color:var(--text-primary)}.sales-container[_ngcontent-%COMP%]{padding:1.5rem;max-width:1400px;margin:0 auto;background:transparent;min-height:100%}.sales-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem}.sales-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;color:#262626;font-size:1.5rem;font-weight:600}.sales-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{display:flex;gap:.75rem;align-items:center}.sales-header[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.sales-header[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;font-size:.875rem;color:#595959}.sales-header[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .sales-header[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.5rem .75rem;border:1px solid rgba(0,0,0,.08);border-radius:16px;font-size:.875rem;background:#fff;transition:.2s ease}.sales-header[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .sales-header[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#00000029}.summary-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:1rem;margin-bottom:1.5rem}.summary-card[_ngcontent-%COMP%]{background:#fff;border-radius:24px;padding:1.5rem;display:flex;align-items:center;gap:1rem;box-shadow:0 4px 24px #0000000f;transition:.2s ease}.summary-card[_ngcontent-%COMP%]:hover{box-shadow:0 8px 32px #00000014}.summary-card[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:16px;display:flex;align-items:center;justify-content:center;font-size:1.25rem;background:#2d167414;color:#2d1674}.summary-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:.75rem;font-weight:500;color:#595959;text-transform:uppercase;letter-spacing:.5px}.summary-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .card-value[_ngcontent-%COMP%]{margin:.25rem 0 0;font-size:1.5rem;font-weight:700;color:#262626}.sales-table-wrapper[_ngcontent-%COMP%]{overflow-x:auto;border-radius:24px;background:#fff;box-shadow:0 4px 24px #0000000f}.sales-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background:transparent;border-radius:24px;overflow:hidden;box-shadow:none}.sales-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:transparent}.sales-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:1rem 1.5rem;text-align:left;font-weight:500;font-size:.875rem;color:#595959;border-bottom:1px solid rgba(0,0,0,.06)}.sales-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:background .15s ease}.sales-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#00000005}.sales-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:not(:last-child)   td[_ngcontent-%COMP%]{border-bottom:1px solid rgba(0,0,0,.04)}.sales-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem 1.5rem;font-size:.875rem;color:#262626}.sales-table[_ngcontent-%COMP%]   .payment-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:.25rem .75rem;border-radius:9999px;font-size:.75rem;font-weight:500}.sales-table[_ngcontent-%COMP%]   .payment-badge.status-success[_ngcontent-%COMP%], .sales-table[_ngcontent-%COMP%]   .payment-badge.status-completed[_ngcontent-%COMP%]{background:#48bb781f;color:#38a169}.sales-table[_ngcontent-%COMP%]   .payment-badge.status-warning[_ngcontent-%COMP%], .sales-table[_ngcontent-%COMP%]   .payment-badge.status-pending[_ngcontent-%COMP%]{background:#ed89361f;color:#dd6b20}.sales-table[_ngcontent-%COMP%]   .payment-badge.status-danger[_ngcontent-%COMP%], .sales-table[_ngcontent-%COMP%]   .payment-badge.status-cancelled[_ngcontent-%COMP%]{background:#f565651f;color:#e53e3e}.sales-table[_ngcontent-%COMP%]   .payment-badge.status-info[_ngcontent-%COMP%], .sales-table[_ngcontent-%COMP%]   .payment-badge.status-processing[_ngcontent-%COMP%]{background:#4299e11f;color:#3182ce}.sales-table[_ngcontent-%COMP%]   .payment-badge.status-primary[_ngcontent-%COMP%]{background:#2d16741f;color:#2d1674}.sales-table[_ngcontent-%COMP%]   .payment-badge.payment-cash[_ngcontent-%COMP%]{background:#48bb781f;color:#38a169}.sales-table[_ngcontent-%COMP%]   .payment-badge.payment-card[_ngcontent-%COMP%]{background:#4299e11f;color:#3182ce}.sales-table[_ngcontent-%COMP%]   .payment-badge.payment-transfer[_ngcontent-%COMP%]{background:#ed89361f;color:#dd6b20}.sales-table[_ngcontent-%COMP%]   .payment-badge.payment-mixed[_ngcontent-%COMP%]{background:#8e55c71f;color:#7946b4}.sales-table[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:.25rem .75rem;border-radius:9999px;font-size:.75rem;font-weight:500}.sales-table[_ngcontent-%COMP%]   .status-badge.status-success[_ngcontent-%COMP%], .sales-table[_ngcontent-%COMP%]   .status-badge.status-completed[_ngcontent-%COMP%]{background:#48bb781f;color:#38a169}.sales-table[_ngcontent-%COMP%]   .status-badge.status-warning[_ngcontent-%COMP%], .sales-table[_ngcontent-%COMP%]   .status-badge.status-pending[_ngcontent-%COMP%]{background:#ed89361f;color:#dd6b20}.sales-table[_ngcontent-%COMP%]   .status-badge.status-danger[_ngcontent-%COMP%], .sales-table[_ngcontent-%COMP%]   .status-badge.status-cancelled[_ngcontent-%COMP%]{background:#f565651f;color:#e53e3e}.sales-table[_ngcontent-%COMP%]   .status-badge.status-info[_ngcontent-%COMP%], .sales-table[_ngcontent-%COMP%]   .status-badge.status-processing[_ngcontent-%COMP%]{background:#4299e11f;color:#3182ce}.sales-table[_ngcontent-%COMP%]   .status-badge.status-primary[_ngcontent-%COMP%]{background:#2d16741f;color:#2d1674}.sales-table[_ngcontent-%COMP%]   .status-badge.status-completed[_ngcontent-%COMP%]{background:#48bb781f;color:#38a169}.sales-table[_ngcontent-%COMP%]   .status-badge.status-cancelled[_ngcontent-%COMP%]{background:#f565651f;color:#e53e3e}.sales-table[_ngcontent-%COMP%]   .status-badge.status-refunded[_ngcontent-%COMP%]{background:#ed89361f;color:#dd6b20}.sales-table[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;gap:.5rem}.sales-table[_ngcontent-%COMP%]   .btn-view[_ngcontent-%COMP%], .sales-table[_ngcontent-%COMP%]   .btn-print[_ngcontent-%COMP%], .sales-table[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]{padding:.5rem;border:none;background:transparent;cursor:pointer;font-size:.9rem;transition:.2s ease;border-radius:12px}.sales-table[_ngcontent-%COMP%]   .btn-view[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .sales-table[_ngcontent-%COMP%]   .btn-print[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .sales-table[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#595959}.sales-table[_ngcontent-%COMP%]   .btn-view[_ngcontent-%COMP%]:hover:not(:disabled), .sales-table[_ngcontent-%COMP%]   .btn-print[_ngcontent-%COMP%]:hover:not(:disabled), .sales-table[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]:hover:not(:disabled){background:#0000000a}.sales-table[_ngcontent-%COMP%]   .btn-view[_ngcontent-%COMP%]:hover:not(:disabled)   i[_ngcontent-%COMP%], .sales-table[_ngcontent-%COMP%]   .btn-print[_ngcontent-%COMP%]:hover:not(:disabled)   i[_ngcontent-%COMP%], .sales-table[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]:hover:not(:disabled)   i[_ngcontent-%COMP%]{color:#262626}.sales-table[_ngcontent-%COMP%]   .btn-view[_ngcontent-%COMP%]:disabled, .sales-table[_ngcontent-%COMP%]   .btn-print[_ngcontent-%COMP%]:disabled, .sales-table[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]:disabled{opacity:.3;cursor:not-allowed}.sales-table[_ngcontent-%COMP%]   .btn-refund[_ngcontent-%COMP%]{padding:.5rem;border:none;background:transparent;cursor:pointer;font-size:.9rem;transition:.2s ease;border-radius:12px}.sales-table[_ngcontent-%COMP%]   .btn-refund[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#ed8936}.sales-table[_ngcontent-%COMP%]   .btn-refund[_ngcontent-%COMP%]:hover:not(:disabled){background:#ed893614}.sales-table[_ngcontent-%COMP%]   .btn-refund[_ngcontent-%COMP%]:disabled{opacity:.3;cursor:not-allowed}.sales-table[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#f56565}.sales-table[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]:hover:not(:disabled){background:#f5656514}.sales-table[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{text-align:center;padding:3rem;color:#8c8c8c;font-size:.875rem}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;justify-content:center;align-items:center;z-index:1050}.modal[_ngcontent-%COMP%]{background:#fff;border-radius:12px;width:90%;max-width:600px;max-height:90vh;overflow-y:auto;box-shadow:0 10px 40px #0003}.modal.modal-large[_ngcontent-%COMP%]{max-width:900px}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1.5rem;border-bottom:1px solid #e0e0e0}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#262626;font-size:1.5rem}.modal-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{background:none;border:none;font-size:2rem;cursor:pointer;color:#8c8c8c;padding:0;width:2rem;height:2rem;display:flex;align-items:center;justify-content:center}.modal-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]:hover{color:#262626}.modal-body[_ngcontent-%COMP%]{padding:1.5rem}.sale-info[_ngcontent-%COMP%]{background:#f9f9f9;padding:1rem;border-radius:8px;margin-bottom:1.5rem}.sale-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:.5rem 0;border-bottom:1px solid #e0e0e0}.sale-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.sale-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .info-label[_ngcontent-%COMP%]{font-weight:600;color:#262626}.items-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-bottom:1.5rem}.items-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:#f5f5f5}.items-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.75rem;text-align:left;font-weight:600;font-size:.9rem;color:#262626}.items-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem;border-bottom:1px solid #e0e0e0;font-size:.9rem}.sale-totals[_ngcontent-%COMP%]{background:#f9f9f9;padding:1rem;border-radius:8px}.sale-totals[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:.5rem 0}.sale-totals[_ngcontent-%COMP%]   .total-row.grand-total[_ngcontent-%COMP%]{padding-top:1rem;border-top:2px solid #2d1674;font-size:1.2rem;color:#2d1674}@media(max-width:768px){.sales-container[_ngcontent-%COMP%]{padding:1rem}.sales-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:1rem}.sales-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{flex-wrap:wrap}.summary-cards[_ngcontent-%COMP%]{grid-template-columns:1fr}}.row-count[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;color:#666;font-size:14px;font-weight:500}.page-size-select[_ngcontent-%COMP%]{padding:6px 10px;border:1px solid #ddd;border-radius:6px;font-size:14px;cursor:pointer;transition:all .3s ease}.page-size-select[_ngcontent-%COMP%]:hover{border-color:#2d1674}.page-size-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#2d1674;box-shadow:0 0 0 3px #2d16741a}.pagination[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:10px;margin-top:25px;padding-top:20px;border-top:1px solid #eee}.pagination-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px 16px;border:1px solid #ddd;border-radius:6px;background:#fff;color:#333;font-size:14px;font-weight:500;cursor:pointer;transition:all .3s ease}.pagination-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:12px}.pagination-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#2d1674;color:#fff;border-color:#2d1674;transform:translateY(-2px);box-shadow:0 4px 12px #2d16744d}.pagination-btn[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed}.pagination-pages[_ngcontent-%COMP%]{display:flex;gap:5px}.pagination-page[_ngcontent-%COMP%]{min-width:36px;height:36px;padding:0 8px;border:1px solid #ddd;border-radius:6px;background:#fff;color:#333;font-size:14px;font-weight:500;cursor:pointer;transition:all .3s ease}.pagination-page[_ngcontent-%COMP%]:hover:not(.active){background:#f5f5f5;border-color:#2d1674}.pagination-page.active[_ngcontent-%COMP%]{background:#2d1674;color:#fff;border-color:#2d1674;box-shadow:0 2px 8px #2d16744d}.pagination-page.ellipsis[_ngcontent-%COMP%]{border:none;background:transparent;cursor:default;opacity:.6}.pagination-page.ellipsis[_ngcontent-%COMP%]:hover{background:transparent;border:none}.refund-type-selector[_ngcontent-%COMP%]{margin-bottom:1.5rem;display:flex;gap:1.5rem}.refund-type-selector[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;cursor:pointer;font-size:1rem;font-weight:500}.refund-type-selector[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{width:18px;height:18px;cursor:pointer}.refund-items[_ngcontent-%COMP%]{margin-bottom:1.5rem}.refund-items[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:1rem;color:#262626;font-size:1.1rem}.refund-items[_ngcontent-%COMP%]   .qty-input[_ngcontent-%COMP%]{width:70px;padding:.3rem;border:1px solid #ddd;border-radius:4px;text-align:center}.refund-items[_ngcontent-%COMP%]   .qty-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#2d1674}.refund-items[_ngcontent-%COMP%]   .qty-input[_ngcontent-%COMP%]:disabled{background:#f5f5f5;cursor:not-allowed}.btn-primary[_ngcontent-%COMP%]{padding:.5rem 1rem;border-radius:9999px;border:1px solid transparent;font-size:.875rem;font-weight:500;cursor:pointer;transition:all .2s ease;display:inline-flex;align-items:center;justify-content:center;gap:.5rem;min-height:24px;box-shadow:none}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#0000000a}.btn-primary[_ngcontent-%COMP%]:active{transform:scale(.98)}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.btn-primary[_ngcontent-%COMP%]{background:#2d1674;color:#fff;box-shadow:none}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#1e0f52;transform:translateY(-1px)}.btn-primary[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}.btn-primary[_ngcontent-%COMP%]{margin:30px 10px 0 0}.btn-secondary[_ngcontent-%COMP%]{padding:.5rem 1rem;border-radius:9999px;border:1px solid transparent;font-size:.875rem;font-weight:500;cursor:pointer;transition:all .2s ease;display:inline-flex;align-items:center;justify-content:center;gap:.5rem;min-height:24px;box-shadow:none}.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:#0000000a}.btn-secondary[_ngcontent-%COMP%]:active{transform:scale(.98)}.btn-secondary[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.btn-secondary[_ngcontent-%COMP%]{background:#fff;color:#262626;border:1px solid #e5e7eb}.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:#0000000a;border-color:#9ca3af}.btn-secondary[_ngcontent-%COMP%]{margin:30px 0 0}.refund-summary[_ngcontent-%COMP%]{margin-top:1rem;padding:1rem;background:#2d16741a;border-radius:8px;text-align:right}.refund-summary[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:1.2rem;color:#2d1674}.form-group[_ngcontent-%COMP%]{margin-bottom:1rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-weight:600;color:#262626}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid #ddd;border-radius:8px;font-size:.95rem;font-family:inherit;resize:vertical}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#2d1674;box-shadow:0 0 0 3px #2d16741a}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:.75rem;padding:1.5rem;border-top:1px solid #e0e0e0}.search-input[_ngcontent-%COMP%]{padding:.5rem .75rem;border:1px solid #d0d0d0;border-radius:6px;font-size:.9rem;min-width:200px}.search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#2d1674;box-shadow:0 0 0 3px #2d16741a}']})}}return o})()}}]);