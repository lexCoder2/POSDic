(self.webpackChunkretail_pos=self.webpackChunkretail_pos||[]).push([[868],{8694:()=>{},9868:(v,A,x)=>{"use strict";var h,y;void 0!==(y="function"==typeof(h=function(){Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),Number.isInteger||(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e});var t={VERSION:"2.2.5",DEBUG:!1,log:{trace:function(){t.DEBUG&&console.log.apply(console,arguments)},info:function(){console.info.apply(console,arguments)},warn:function(){console.warn.apply(console,arguments)},allay:function(){t.DEBUG&&console.warn.apply(console,arguments)},error:function(){console.error.apply(console,arguments)}},streams:{serial:"SERIAL",usb:"USB",hid:"HID",printer:"PRINTER",file:"FILE",socket:"SOCKET"},websocket:{connection:null,shutdown:!1,connectConfig:{host:["localhost","localhost.qz.io"],hostIndex:0,usingSecure:!0,protocol:{secure:"wss://",insecure:"ws://"},port:{secure:[8181,8282,8383,8484],insecure:[8182,8283,8384,8485],portIndex:0},keepAlive:60,retries:0,delay:0},setup:{findConnection:function(e,r,n){if(t.websocket.shutdown)n(new Error("Connection attempt cancelled by user"));else{if(e.port.secure.length)!e.port.insecure.length&&!e.usingSecure&&(t.log.trace("No insecure ports specified - forcing secure connection"),e.usingSecure=!0);else{if(!e.port.insecure.length)return void n(new Error("No ports have been specified to connect over"));e.usingSecure&&(t.log.error("No secure ports specified - forcing insecure connection"),e.usingSecure=!1)}var s,o=function(){if(t.websocket.shutdown)n(new Error("Connection attempt cancelled by user"));else{if(e.port.portIndex++,e.usingSecure&&e.port.portIndex>=e.port.secure.length||!e.usingSecure&&e.port.portIndex>=e.port.insecure.length){if(e.hostIndex>=e.host.length-1)return void n(new Error("Unable to establish connection with QZ"));e.hostIndex++,e.port.portIndex=0}t.websocket.setup.findConnection(e,r,n)}};s=e.usingSecure?e.protocol.secure+e.host[e.hostIndex]+":"+e.port.secure[e.port.portIndex]:e.protocol.insecure+e.host[e.hostIndex]+":"+e.port.insecure[e.port.portIndex];try{t.log.trace("Attempting connection",s),t.websocket.connection=new t.tools.ws(s)}catch(i){return t.log.error(i),void o()}null!=t.websocket.connection?(t.websocket.connection.established=!1,t.websocket.connection.onopen=function(i){if(!t.websocket.connection.established&&(t.log.trace(i),t.log.info("Established connection with QZ Tray on "+s),t.websocket.setup.openConnection({resolve:r,reject:n}),e.keepAlive>0)){var a=setInterval(function(){t.tools.isActive()&&t.websocket.connection.interval===a?t.websocket.connection.send("ping"):clearInterval(a)},1e3*e.keepAlive);t.websocket.connection.interval=a}},t.websocket.connection.onclose=function(){t.websocket.connection&&typeof navigator<"u"&&-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome")&&t.websocket.connection.onerror()},t.websocket.connection.onerror=function(i){t.log.trace(i),t.websocket.connection=null,o()}):n(new Error("Unable to create a websocket connection"))}},openConnection:function(e){function r(n){void 0===n&&(n=null),C.api.getVersion().then(function(o){t.websocket.connection.version=o,t.websocket.connection.semver=o.toLowerCase().replace(/-rc\./g,"-rc").split(/[\\+\\.-]/g);for(var s=0;s<t.websocket.connection.semver.length;s++){try{if(3==s&&0==t.websocket.connection.semver[s].toLowerCase().indexOf("rc")){t.websocket.connection.semver[s]=-t.websocket.connection.semver[s].replace(/\D/g,"");continue}t.websocket.connection.semver[s]=parseInt(t.websocket.connection.semver[s])}catch{}t.websocket.connection.semver.length<4&&(t.websocket.connection.semver[3]=0)}t.compatible.algorithm(!0)}).then(function(){t.websocket.connection.sendData({certificate:n,promise:e})})}t.websocket.connection.established=!0,t.websocket.connection.onclose=function(n){for(var o in t.log.trace(n),t.websocket.connection=null,t.websocket.callClose(n),t.log.info("Closed connection with QZ Tray"),t.websocket.pendingCalls)t.websocket.pendingCalls.hasOwnProperty(o)&&t.websocket.pendingCalls[o].reject(new Error("Connection closed before response received"));null!=this.promise&&this.promise.resolve()},t.websocket.connection.onerror=function(n){t.websocket.callError(n)},t.websocket.connection.sendData=function(n){t.log.trace("Preparing object for websocket",n),null==n.timestamp&&(n.timestamp=Date.now(),"number"!=typeof n.timestamp&&(n.timestamp=(new Date).getTime())),null!=n.promise&&(n.uid=t.websocket.setup.newUID(),t.websocket.pendingCalls[n.uid]=n.promise),n.position={x:typeof screen<"u"?(screen.availWidth||screen.width)/2+(screen.left||screen.availLeft||0):0,y:typeof screen<"u"?(screen.availHeight||screen.height)/2+(screen.top||screen.availTop||0):0};try{if(null!=n.call&&null==n.signature&&t.security.needsSigned(n.call)){var s=t.tools.hash(t.tools.stringify({call:n.call,params:n.params,timestamp:n.timestamp}));s.then||(s=t.tools.promise(function(i){i(s)})),s.then(function(i){return t.security.callSign(i)}).then(function(i){t.log.trace("Signature for call",i),n.signature=i||"",n.signAlgorithm=t.security.signAlgorithm,t.signContent=void 0,t.websocket.connection.send(t.tools.stringify(n))}).catch(function(i){t.log.error("Signing failed",i),null!=n.promise&&(n.promise.reject(new Error("Failed to sign request")),delete t.websocket.pendingCalls[n.uid])})}else t.log.trace("Signature for call",n.signature),t.websocket.connection.send(t.tools.stringify(n))}catch(i){t.log.error(i),null!=n.promise&&(n.promise.reject(i),delete t.websocket.pendingCalls[n.uid])}},t.websocket.connection.onmessage=function(n){var o=JSON.parse(n.data);if(null!=o.uid){t.log.trace("Received response from websocket",o);var s=t.websocket.pendingCalls[o.uid];null==s?t.log.allay("No promise found for returned response"):null!=o.error?s.reject(new Error(o.error)):s.resolve(o.result),delete t.websocket.pendingCalls[o.uid]}else if(null==o.type)t.websocket.connection.close(4003,"Connected to incompatible QZ Tray version");else switch(o.type){case t.streams.serial:o.event||(o.event=JSON.stringify({portName:o.key,output:o.data})),t.serial.callSerial(JSON.parse(o.event));break;case t.streams.socket:t.socket.callSocket(JSON.parse(o.event));break;case t.streams.usb:o.event||(o.event=JSON.stringify({vendorId:o.key[0],productId:o.key[1],output:o.data})),t.usb.callUsb(JSON.parse(o.event));break;case t.streams.hid:t.hid.callHid(JSON.parse(o.event));break;case t.streams.printer:t.printers.callPrinter(JSON.parse(o.event));break;case t.streams.file:t.file.callFile(JSON.parse(o.event));break;default:t.log.allay("Cannot determine stream type for callback",o)}},t.security.callCert().then(r).catch(function(n){t.log.warn("Failed to get certificate:",n),t.security.rejectOnCertFailure?e.reject(n):r(null)})},newUID:function(){return(new Array(7).join("0")+(Math.random()*Math.pow(36,6)|0).toString(36)).slice(-6)}},dataPromise:function(e,r,n,o){return t.tools.promise(function(s,i){t.websocket.connection.sendData({call:e,promise:{resolve:s,reject:i},params:r,signature:n,timestamp:o})})},pendingCalls:{},errorCallbacks:[],callError:function(e){if(Array.isArray(t.websocket.errorCallbacks))for(var r=0;r<t.websocket.errorCallbacks.length;r++)t.websocket.errorCallbacks[r](e);else t.websocket.errorCallbacks(e)},closedCallbacks:[],callClose:function(e){if(Array.isArray(t.websocket.closedCallbacks))for(var r=0;r<t.websocket.closedCallbacks.length;r++)t.websocket.closedCallbacks[r](e);else t.websocket.closedCallbacks(e)}},printing:{defaultConfig:{bounds:null,colorType:"color",copies:1,density:0,duplex:!1,fallbackDensity:null,interpolation:"bicubic",jobName:null,legacy:!1,margins:0,orientation:null,paperThickness:null,printerTray:null,rasterize:!1,rotation:0,scaleContent:!0,size:null,units:"in",forceRaw:!1,encoding:null,spool:null}},serial:{serialCallbacks:[],callSerial:function(e){if(Array.isArray(t.serial.serialCallbacks))for(var r=0;r<t.serial.serialCallbacks.length;r++)t.serial.serialCallbacks[r](e);else t.serial.serialCallbacks(e)}},socket:{socketCallbacks:[],callSocket:function(e){if(Array.isArray(t.socket.socketCallbacks))for(var r=0;r<t.socket.socketCallbacks.length;r++)t.socket.socketCallbacks[r](e);else t.socket.socketCallbacks(e)}},usb:{usbCallbacks:[],callUsb:function(e){if(Array.isArray(t.usb.usbCallbacks))for(var r=0;r<t.usb.usbCallbacks.length;r++)t.usb.usbCallbacks[r](e);else t.usb.usbCallbacks(e)}},hid:{hidCallbacks:[],callHid:function(e){if(Array.isArray(t.hid.hidCallbacks))for(var r=0;r<t.hid.hidCallbacks.length;r++)t.hid.hidCallbacks[r](e);else t.hid.hidCallbacks(e)}},printers:{printerCallbacks:[],callPrinter:function(e){if(Array.isArray(t.printers.printerCallbacks))for(var r=0;r<t.printers.printerCallbacks.length;r++)t.printers.printerCallbacks[r](e);else t.printers.printerCallbacks(e)}},file:{fileCallbacks:[],callFile:function(e){if(Array.isArray(t.file.fileCallbacks))for(var r=0;r<t.file.fileCallbacks.length;r++)t.file.fileCallbacks[r](e);else t.file.fileCallbacks(e)}},security:{certHandler:function(e,r){r()},callCert:function(){return"function"==typeof t.security.certHandler.then?t.security.certHandler:"AsyncFunction"===t.security.certHandler.constructor.name?t.security.certHandler():t.tools.promise(t.security.certHandler)},signatureFactory:function(){return function(e){e()}},callSign:function(e){return"AsyncFunction"===t.security.signatureFactory.constructor.name?t.security.signatureFactory(e):t.tools.promise(t.security.signatureFactory(e))},signAlgorithm:"SHA1",rejectOnCertFailure:!1,needsSigned:function(e){return null!=e&&-1===["printers.getStatus","printers.stopListening","usb.isClaimed","usb.closeStream","usb.releaseDevice","hid.stopListening","hid.isClaimed","hid.closeStream","hid.releaseDevice","file.stopListening","getVersion"].indexOf(e)}},tools:{promise:function(e){return typeof RSVP<"u"?new RSVP.Promise(e):typeof Promise<"u"?new Promise(e):void t.log.error("Promise/A+ support is required.  See qz.api.setPromiseType(...)")},reject:function(e){return t.tools.promise(function(r,n){n(e)})},stringify:function(e){var r=Array.prototype.toJSON;delete Array.prototype.toJSON;var o=JSON.stringify(e,function n(s,i){if("promise"!==s)return i});return r&&(Array.prototype.toJSON=r),o},hash:function(e){return typeof Sha256<"u"?Sha256.hash(e):t.SHA.hash(e)},ws:typeof WebSocket<"u"?WebSocket:null,absolute:function(e){if(typeof window<"u"&&"function"==typeof document.createElement){var r=document.createElement("a");return r.href=e,r.href}return x(8694).resolve(e),e},relative:function(e){for(var r=0;r<e.length;r++)if(e[r].constructor===Object){var n=!1;e[r].data&&e[r].data.search&&0===e[r].data.search(/data:image\/\w+;base64,/)?(e[r].flavor="base64",e[r].data=e[r].data.replace(/^data:image\/\w+;base64,/,"")):e[r].flavor?["FILE","XML"].indexOf(e[r].flavor.toUpperCase())>-1&&(n=!0):(e[r].format&&["HTML","IMAGE","PDF","FILE","XML"].indexOf(e[r].format.toUpperCase())>-1||e[r].type&&(["PIXEL","IMAGE","PDF"].indexOf(e[r].type.toUpperCase())>-1&&!e[r].format||["HTML","PDF"].indexOf(e[r].type.toUpperCase())>-1&&(!e[r].format||"FILE"===e[r].format.toUpperCase())))&&(n=!0),n&&(e[r].data=t.tools.absolute(e[r].data)),e[r].options&&"string"==typeof e[r].options.overlay&&(e[r].options.overlay=t.tools.absolute(e[r].options.overlay))}},extend:function(e){"object"!=typeof e&&(e={});for(var r=1;r<arguments.length;r++){var n=arguments[r];if(n)for(var o in n)if(n.hasOwnProperty(o)){if(e===n[o])continue;var s;n[o]&&n[o].constructor&&n[o].constructor===Object?(s=Array.isArray(n[o])?e[o]||[]:e[o]||{},e[o]=t.tools.extend(s,n[o])):void 0!==n[o]&&(e[o]=n[o])}}return e},versionCompare:function(e,r,n,o){if(t.tools.assertActive()){var s=t.websocket.connection.semver;return s[0]!=e?s[0]-e:null!=r&&s[1]!=r?s[1]-r:null!=n&&s[2]!=n?s[2]-n:null!=o&&s.length>3&&s[3]!=o?Number.isInteger(s[3])&&Number.isInteger(o)?s[3]-o:s[3].toString().localeCompare(o.toString()):0}},isVersion:function(e,r,n,o){return 0==t.tools.versionCompare(e,r,n,o)},isActive:function(){return!t.websocket.shutdown&&null!=t.websocket.connection&&(t.websocket.connection.readyState===t.tools.ws.OPEN||t.websocket.connection.readyState===t.tools.ws.CONNECTING)},assertActive:function(){if(t.tools.isActive())return!0;throw new Error("A connection to QZ has not been established yet")},uint8ArrayToHex:function(e){return Array.from(e).map(function(r){return r.toString(16).padStart(2,"0")}).join("")},uint8ArrayToBase64:function(e){var o,r=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"],n="",s=e.length;for(o=2;o<s;o+=3)n+=r[e[o-2]>>2],n+=r[(3&e[o-2])<<4|e[o-1]>>4],n+=r[(15&e[o-1])<<2|e[o]>>6],n+=r[63&e[o]];return o===s+1&&(n+=r[e[o-2]>>2],n+=r[(3&e[o-2])<<4],n+="=="),o===s&&(n+=r[e[o-2]>>2],n+=r[(3&e[o-2])<<4|e[o-1]>>4],n+=r[(15&e[o-1])<<2],n+="="),n}},compatible:{data:function(e){for(var r=0;r<e.length;r++)if(e[r].constructor===Object&&e[r].data instanceof Uint8Array&&e[r].flavor){var n=e[r].flavor.toString().toUpperCase();switch(n){case"BASE64":e[r].data=t.tools.uint8ArrayToBase64(e[r].data);break;case"HEX":e[r].data=t.tools.uint8ArrayToHex(e[r].data);break;default:throw new Error("Uint8Array conversion to '"+n+"' is not supported.")}}if(t.tools.versionCompare(2,2,4)<0)for(r=0;r<e.length;r++)e[r].constructor===Object&&e[r].options&&"string"==typeof e[r].options.dotDensity&&(e[r].options.dotDensity=e[r].options.dotDensity.toLowerCase().replace("-legacy",""));if(t.tools.isVersion(2,0))for(t.log.trace("Converting print data to v2.0 for "+t.websocket.connection.version),r=0;r<e.length;r++)e[r].constructor===Object&&(e[r].type&&"RAW"===e[r].type.toUpperCase()&&e[r].format&&"IMAGE"===e[r].format.toUpperCase()&&(e[r].flavor&&"BASE64"===e[r].flavor.toUpperCase()&&(e[r].data="data:image/compat;base64,"+e[r].data),e[r].flavor="IMAGE"),(e[r].type&&"RAW"===e[r].type.toUpperCase()||e[r].format&&"COMMAND"===e[r].format.toUpperCase())&&(e[r].format="RAW"),e[r].type=e[r].format,e[r].format=e[r].flavor,delete e[r].flavor)},config:function(e,r){return t.tools.isVersion(2,0)&&(r.rasterize||(e.rasterize=!0)),t.tools.versionCompare(2,2)<0&&"undefined"!==e.forceRaw&&(e.altPrinting=e.forceRaw,delete e.forceRaw),t.tools.versionCompare(2,1,2,11)<0&&e.spool&&(e.spool.size&&(e.perSpool=e.spool.size,delete e.spool.size),e.spool.end&&(e.endOfDoc=e.spool.end,delete e.spool.end),delete e.spool),e},networking:function(e,r,n,o,s){return t.tools.isVersion(2,0)?t.tools.promise(function(i,a){t.websocket.dataPromise("websocket.getNetworkInfo",{hostname:e,port:r},n,o).then(function(l){i(typeof s<"u"?s(l):l)},a)}):t.tools.promise(function(i,a){t.websocket.dataPromise("networking.device",{hostname:e,port:r},n,o).then(function(l){i({ipAddress:l.ip,macAddress:l.mac})},a)})},algorithm:function(e){return!(t.tools.isActive()&&t.websocket.connection.semver&&t.tools.isVersion(2,0)&&(e||t.log.warn("Connected to an older version of QZ, alternate signature algorithms are not supported"),1))}},SHA:{hash:function(e){e=t.SHA._utf8Encode(e)+"\x80";for(var r=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],n=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],s=Math.ceil((e.length/4+2)/16),i=new Array(s),a=0;a<s;a++){i[a]=new Array(16);for(var l=0;l<16;l++)i[a][l]=e.charCodeAt(64*a+4*l)<<24|e.charCodeAt(64*a+4*l+1)<<16|e.charCodeAt(64*a+4*l+2)<<8|e.charCodeAt(64*a+4*l+3)}i[s-1][14]=8*(e.length-1)/Math.pow(2,32),i[s-1][14]=Math.floor(i[s-1][14]),i[s-1][15]=8*(e.length-1)&4294967295;var p,b,m,c,d,g,k,w,f=new Array(64);for(a=0;a<s;a++){for(var u=0;u<16;u++)f[u]=i[a][u];for(u=16;u<64;u++)f[u]=t.SHA._dev1(f[u-2])+f[u-7]+t.SHA._dev0(f[u-15])+f[u-16]&4294967295;for(p=n[0],b=n[1],m=n[2],c=n[3],d=n[4],g=n[5],k=n[6],w=n[7],u=0;u<64;u++){var P=w+t.SHA._sig1(d)+t.SHA._ch(d,g,k)+r[u]+f[u],H=t.SHA._sig0(p)+t.SHA._maj(p,b,m);w=k,k=g,g=d,d=c+P&4294967295,c=m,m=b,b=p,p=P+H&4294967295}n[0]=n[0]+p&4294967295,n[1]=n[1]+b&4294967295,n[2]=n[2]+m&4294967295,n[3]=n[3]+c&4294967295,n[4]=n[4]+d&4294967295,n[5]=n[5]+g&4294967295,n[6]=n[6]+k&4294967295,n[7]=n[7]+w&4294967295}return t.SHA._hexStr(n[0])+t.SHA._hexStr(n[1])+t.SHA._hexStr(n[2])+t.SHA._hexStr(n[3])+t.SHA._hexStr(n[4])+t.SHA._hexStr(n[5])+t.SHA._hexStr(n[6])+t.SHA._hexStr(n[7])},_rotr:function(e,r){return r>>>e|r<<32-e},_sig0:function(e){return t.SHA._rotr(2,e)^t.SHA._rotr(13,e)^t.SHA._rotr(22,e)},_sig1:function(e){return t.SHA._rotr(6,e)^t.SHA._rotr(11,e)^t.SHA._rotr(25,e)},_dev0:function(e){return t.SHA._rotr(7,e)^t.SHA._rotr(18,e)^e>>>3},_dev1:function(e){return t.SHA._rotr(17,e)^t.SHA._rotr(19,e)^e>>>10},_ch:function(e,r,n){return e&r^~e&n},_maj:function(e,r,n){return e&r^e&n^r&n},_hexStr:function(e){for(var r="",o=7;o>=0;o--)r+=(e>>>4*o&15).toString(16);return r},_unescape:function(e){return e.replace(/%(u[\da-f]{4}|[\da-f]{2})/gi,function(r){if(r.length-1)return String.fromCharCode(parseInt(r.substring(r.length-3?2:1),16));var n=r.charCodeAt(0);return n<256?"%"+(0+n.toString(16)).slice(-2).toUpperCase():"%u"+("000"+n.toString(16)).slice(-4).toUpperCase()})},_utf8Encode:function(e){return t.SHA._unescape(encodeURIComponent(e))}}};function S(e,r){this.config=t.tools.extend({},t.printing.defaultConfig),this._dirtyOpts={},this.setPrinter=function(n){"string"==typeof n&&(n={name:n}),this.printer=n},this.getPrinter=function(){return this.printer},this.reconfigure=function(n){for(var o in n)void 0!==n[o]&&(this._dirtyOpts[o]=!0);t.tools.extend(this.config,n)},this.getOptions=function(){return t.compatible.config(this.config,this._dirtyOpts)},this.setPrinter(e),this.reconfigure(r)}S.prototype.print=function(e,r,n){C.print(this,e,r,n)};var C={websocket:{isActive:function(){return t.tools.isActive()},connect:function(e){return t.tools.promise(function(r,n){if(t.websocket.connection){const s=t.websocket.connection.readyState;if(s===t.tools.ws.OPEN)return void n(new Error("An open connection with QZ Tray already exists"));if(s===t.tools.ws.CONNECTING)return void n(new Error("The current connection attempt has not returned yet"));if(s===t.tools.ws.CLOSING)return void n(new Error("Waiting for previous disconnect request to complete"))}if(t.tools.ws)if(t.tools.ws.CLOSED&&2!=t.tools.ws.CLOSED){null==e&&(e={}),(typeof location>"u"||"https:"!==location.protocol)&&typeof e.usingSecure>"u"&&(t.log.trace("Disabling secure ports due to insecure page"),e.usingSecure=!1),typeof e.host<"u"&&!Array.isArray(e.host)&&(e.host=[e.host]),t.websocket.shutdown=!1;var o=function(s){var i=!1,a=function(){i||(i=!0,e&&s<e.retries?o(s+1):(t.websocket.connection=null,n.apply(null,arguments)))},l=function(){var f=t.tools.extend({},t.websocket.connectConfig,e);t.websocket.setup.findConnection(f,r,a)};0==s?l():setTimeout(l,1e3*e.delay)};o(0)}else n(new Error("Unsupported WebSocket version detected: HyBi-00/Hixie-76"));else n(new Error("WebSocket not supported by this browser"))})},disconnect:function(){return t.tools.promise(function(e,r){null!=t.websocket.connection?t.tools.isActive()?(t.websocket.shutdown=!0,t.websocket.connection.promise={resolve:e,reject:r},t.websocket.connection.close()):r(new Error("Current connection is still closing")):r(new Error("No open connection with QZ Tray"))})},setErrorCallbacks:function(e){t.websocket.errorCallbacks=e},setClosedCallbacks:function(e){t.websocket.closedCallbacks=e},getNetworkInfo:t.compatible.networking,getConnectionInfo:function(){if(t.tools.assertActive()){var e=t.websocket.connection.url.split(/[:\/]+/g);return{socket:e[0],host:e[1],port:+e[2]}}}},printers:{getDefault:function(e,r){return t.websocket.dataPromise("printers.getDefault",null,e,r)},find:function(e,r,n){return t.websocket.dataPromise("printers.find",{query:e},r,n)},details:function(){return t.websocket.dataPromise("printers.detail")},startListening:function(e,r){Array.isArray(e)||(e=[e]);var n={printerNames:e};return r&&1==r.jobData&&(n.jobData=!0),r&&r.maxJobData&&(n.maxJobData=r.maxJobData),r&&r.flavor&&(n.flavor=r.flavor),t.websocket.dataPromise("printers.startListening",n)},clearQueue:function(e){return"object"!=typeof e&&(e={printerName:e}),t.websocket.dataPromise("printers.clearQueue",e)},stopListening:function(){return t.websocket.dataPromise("printers.stopListening")},getStatus:function(){return t.websocket.dataPromise("printers.getStatus")},setPrinterCallbacks:function(e){t.printers.printerCallbacks=e}},configs:{setDefaults:function(e){t.tools.extend(t.printing.defaultConfig,e)},create:function(e,r){return new S(e,r)}},print:function(e,r){var n=!1,o=[],s=[];arguments.length>=3&&("boolean"==typeof arguments[2]?(n=arguments[2],arguments.length>=5&&(o=arguments[3],s=arguments[4])):arguments.length>=4&&(o=arguments[2],s=arguments[3]),o&&!Array.isArray(o)&&(o=[o]),s&&!Array.isArray(s)&&(s=[s])),Array.isArray(e)||(e=[e]),Array.isArray(r[0])||(r=[r]);for(var i=0;i<r.length;i++)t.tools.relative(r[i]),t.compatible.data(r[i]);for(var a=function(c){var d={printer:c.config.getPrinter(),options:c.config.getOptions(),data:c.data};return t.websocket.dataPromise("print",d,c.signature,c.timestamp)},l=[],f=0;f<e.length||f<r.length;f++)(function(c){var d={config:e[Math.min(c,e.length-1)],data:r[Math.min(c,r.length-1)],signature:o[c],timestamp:s[c]};l.push(function(){return a(d)})})(f);var p=null;if(n){var b=[];p=function(c){b.push(c)},l.push(function(){return t.tools.promise(function(c,d){b.length?d(b):c()})})}var m=null;return l.reduce(function(c,d){return m=c.catch(p).then(d)},t.tools.promise(function(c){c()})),m},serial:{findPorts:function(){return t.websocket.dataPromise("serial.findPorts")},setSerialCallbacks:function(e){t.serial.serialCallbacks=e},openPort:function(e,r){return t.websocket.dataPromise("serial.openPort",{port:e,options:r})},sendData:function(e,r,n){return t.tools.versionCompare(2,1,0,12)>=0&&("object"!=typeof r&&(r={data:r,type:"PLAIN"}),r.type&&"FILE"==r.type.toUpperCase()&&(r.data=t.tools.absolute(r.data))),t.websocket.dataPromise("serial.sendData",{port:e,data:r,options:n})},closePort:function(e){return t.websocket.dataPromise("serial.closePort",{port:e})}},socket:{open:function(e,r,n){return t.websocket.dataPromise("socket.open",{host:e,port:r,options:n})},close:function(e,r){return t.websocket.dataPromise("socket.close",{host:e,port:r})},sendData:function(e,r,n){return"object"!=typeof n&&(n={data:n,type:"PLAIN"}),t.websocket.dataPromise("socket.sendData",{host:e,port:r,data:n})},setSocketCallbacks:function(e){t.socket.socketCallbacks=e}},usb:{listDevices:function(e){return t.websocket.dataPromise("usb.listDevices",{includeHubs:e})},listInterfaces:function(e){return"object"!=typeof e&&(e={vendorId:arguments[0],productId:arguments[1]}),t.websocket.dataPromise("usb.listInterfaces",e)},listEndpoints:function(e){return"object"!=typeof e&&(e={vendorId:arguments[0],productId:arguments[1],interface:arguments[2]}),t.websocket.dataPromise("usb.listEndpoints",e)},setUsbCallbacks:function(e){t.usb.usbCallbacks=e},claimDevice:function(e){return"object"!=typeof e&&(e={vendorId:arguments[0],productId:arguments[1],interface:arguments[2]}),t.websocket.dataPromise("usb.claimDevice",e)},isClaimed:function(e){return"object"!=typeof e&&(e={vendorId:arguments[0],productId:arguments[1]}),t.websocket.dataPromise("usb.isClaimed",e)},sendData:function(e){return"object"!=typeof e&&(e={vendorId:arguments[0],productId:arguments[1],endpoint:arguments[2],data:arguments[3]}),t.tools.versionCompare(2,1,0,12)>=0&&("object"!=typeof e.data&&(e.data={data:e.data,type:"PLAIN"}),e.data.type&&"FILE"==e.data.type.toUpperCase()&&(e.data.data=t.tools.absolute(e.data.data))),t.websocket.dataPromise("usb.sendData",e)},readData:function(e){return"object"!=typeof e&&(e={vendorId:arguments[0],productId:arguments[1],endpoint:arguments[2],responseSize:arguments[3]}),t.websocket.dataPromise("usb.readData",e)},openStream:function(e){return"object"!=typeof e&&(e={vendorId:arguments[0],productId:arguments[1],endpoint:arguments[2],responseSize:arguments[3],interval:arguments[4]}),t.websocket.dataPromise("usb.openStream",e)},closeStream:function(e){return"object"!=typeof e&&(e={vendorId:arguments[0],productId:arguments[1],endpoint:arguments[2]}),t.websocket.dataPromise("usb.closeStream",e)},releaseDevice:function(e){return"object"!=typeof e&&(e={vendorId:arguments[0],productId:arguments[1]}),t.websocket.dataPromise("usb.releaseDevice",e)}},hid:{listDevices:function(){return t.websocket.dataPromise("hid.listDevices")},startListening:function(){return t.websocket.dataPromise("hid.startListening")},stopListening:function(){return t.websocket.dataPromise("hid.stopListening")},setHidCallbacks:function(e){t.hid.hidCallbacks=e},claimDevice:function(e){return"object"!=typeof e&&(e={vendorId:arguments[0],productId:arguments[1]}),t.websocket.dataPromise("hid.claimDevice",e)},isClaimed:function(e){return"object"!=typeof e&&(e={vendorId:arguments[0],productId:arguments[1]}),t.websocket.dataPromise("hid.isClaimed",e)},sendData:function(e){if("object"!=typeof e&&(e={vendorId:arguments[0],productId:arguments[1],data:arguments[2],endpoint:arguments[3]}),t.tools.versionCompare(2,1,0,12)>=0)"object"!=typeof e.data&&(e.data={data:e.data,type:"PLAIN"}),e.data.type&&"FILE"==e.data.type.toUpperCase()&&(e.data.data=t.tools.absolute(e.data.data));else if("object"==typeof e.data){if("PLAIN"!==e.data.type.toUpperCase()||"string"!=typeof e.data.data)return t.tools.reject(new Error("Data format is not supported with connected QZ Tray version "+t.websocket.connection.version));e.data=e.data.data}return t.websocket.dataPromise("hid.sendData",e)},readData:function(e){return"object"!=typeof e&&(e={vendorId:arguments[0],productId:arguments[1],responseSize:arguments[2]}),t.websocket.dataPromise("hid.readData",e)},sendFeatureReport:function(e){return t.websocket.dataPromise("hid.sendFeatureReport",e)},getFeatureReport:function(e){return t.websocket.dataPromise("hid.getFeatureReport",e)},openStream:function(e){return"object"!=typeof e&&(e={vendorId:arguments[0],productId:arguments[1],responseSize:arguments[2],interval:arguments[3]}),t.websocket.dataPromise("hid.openStream",e)},closeStream:function(e){return"object"!=typeof e&&(e={vendorId:arguments[0],productId:arguments[1]}),t.websocket.dataPromise("hid.closeStream",e)},releaseDevice:function(e){return"object"!=typeof e&&(e={vendorId:arguments[0],productId:arguments[1]}),t.websocket.dataPromise("hid.releaseDevice",e)}},file:{list:function(e,r){var n=t.tools.extend({path:e},r);return t.websocket.dataPromise("file.list",n)},read:function(e,r){var n=t.tools.extend({path:e},r);return t.websocket.dataPromise("file.read",n)},write:function(e,r){var n=t.tools.extend({path:e},r);return t.websocket.dataPromise("file.write",n)},remove:function(e,r){var n=t.tools.extend({path:e},r);return t.websocket.dataPromise("file.remove",n)},startListening:function(e,r){r&&typeof r.include<"u"&&!Array.isArray(r.include)&&(r.include=[r.include]),r&&typeof r.exclude<"u"&&!Array.isArray(r.exclude)&&(r.exclude=[r.exclude]);var n=t.tools.extend({path:e},r);return t.websocket.dataPromise("file.startListening",n)},stopListening:function(e,r){var n=t.tools.extend({path:e},r);return t.websocket.dataPromise("file.stopListening",n)},setFileCallbacks:function(e){t.file.fileCallbacks=e}},networking:{device:function(e,r){return t.tools.isVersion(2,0)?t.compatible.networking(e,r,null,null,function(n){return{ip:n.ipAddress,mac:n.macAddress}}):t.websocket.dataPromise("networking.device",{hostname:e,port:r})},hostname:function(e,r){return t.tools.versionCompare(2,2,2)<0?t.tools.promise(function(n,o){t.websocket.dataPromise("networking.device",{hostname:e,port:r}).then(function(s){console.log(s),n(s.hostname)})}):t.websocket.dataPromise("networking.hostname")},devices:function(e,r){return t.tools.isVersion(2,0)?t.compatible.networking(e,r,null,null,function(n){return[{ip:n.ipAddress,mac:n.macAddress}]}):t.websocket.dataPromise("networking.devices",{hostname:e,port:r})}},security:{setCertificatePromise:function(e,r){t.security.certHandler=e,t.security.rejectOnCertFailure=!(!r||!r.rejectOnFailure)},setSignaturePromise:function(e){t.security.signatureFactory=e},setSignatureAlgorithm:function(e){t.compatible.algorithm()&&(["SHA1","SHA256","SHA512"].indexOf(e.toUpperCase())<0?t.log.error("Signing algorithm '"+e+"' is not supported."):t.security.signAlgorithm=e)},getSignatureAlgorithm:function(){return t.security.signAlgorithm}},api:{showDebug:function(e){return t.DEBUG=e},getVersion:function(){return t.websocket.dataPromise("getVersion")},isVersion:t.tools.isVersion,isVersionGreater:function(e,r,n,o){return t.tools.versionCompare(e,r,n,o)>0},isVersionLess:function(e,r,n,o){return t.tools.versionCompare(e,r,n,o)<0},setPromiseType:function(e){t.tools.promise=e},setSha256Type:function(e){t.tools.hash=e},setWebSocketType:function(e){t.tools.ws=e}},version:t.VERSION};return C}())?h.call(A,x,A,v):h)&&(v.exports=y)}}]);