<div class="favorites">
  <!-- Loading state -->
  @if (isLoading()) {
    <div class="loading-state">
      <i class="fas fa-spinner fa-spin"></i>
      <p>{{ "GLOBAL.LOADING" | translate }}</p>
    </div>
  }

  <!-- Error state -->
  @if (!isLoading() && loadError()) {
    <div class="error-state">
      <i class="fas fa-exclamation-triangle"></i>
      <p>{{ "GLOBAL.ERROR" | translate }}</p>
      <button class="retry-btn" (click)="loadTopProducts()">
        <i class="fas fa-redo"></i>
        {{ "GLOBAL.RETRY" | translate }}
      </button>
    </div>
  }

  <!-- Products grid -->
  @if (!isLoading() && !loadError() && products.length > 0) {
    <div class="products-grid">
      @for (product of products; track product) {
        <div class="product-card" (click)="selectProduct(product)">
          <div class="product-image">
            @if (product.local_image) {
              <img
                [src]="getProductImageUrl(product)"
                [alt]="product.name"
                (error)="onImageError($event)"
              />
            }
            @if (!product.local_image) {
              <div class="no-image">
                <i class="fas fa-box"></i>
              </div>
            }
          </div>
          <div class="product-info">
            <h4 class="product-name">{{ product.name }}</h4>
            @if (product.brand) {
              <p class="product-brand">{{ product.brand }}</p>
            }
            <p class="product-price">{{ product.price | appCurrency }}</p>
          </div>
        </div>
      }
    </div>
  }

  <!-- Empty state -->
  @if (!isLoading() && !loadError() && products.length === 0) {
    <div class="empty-state">
      <i class="fas fa-star"></i>
      <p>{{ "FAVORITES.EMPTY" | translate }}</p>
    </div>
  }
</div>
